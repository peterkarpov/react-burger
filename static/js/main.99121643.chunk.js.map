{"version":3,"sources":["components/ModalOverlay/ModalOverlay.module.css","components/IngredientDetails/IngredientDetails.module.css","components/OrderInfo/OrderInfo.module.css","components/Feed/Feed.module.css","services/utils.tsx","services/authApi.tsx","services/actions/auth.tsx","utils/hooks.tsx","services/auth.tsx","components/Authentication/Login/Login.tsx","components/pages/Login.tsx","components/BurgerIngredientListItem/BurgerIngredientListItem.tsx","components/BurgerIngredients/BurgerIngredients.tsx","services/api.tsx","services/actions/basic.tsx","components/BurgerConstructor/DraggableElement.tsx","components/BurgerConstructor/BurgerConstructor.tsx","components/IngredientDetails/IngredientDetails.tsx","components/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","images/order accpeted/popup/done.png","components/OrderDetails/OrderDetails.tsx","components/pages/Home.tsx","components/Authentication/Registration/Registration.tsx","components/pages/Registration.tsx","services/actions/wsActionTypes.tsx","components/ProfileOrdersListItem/ProfileOrdersListItem.tsx","components/ProfileOrders/ProfileOrders.tsx","components/Profile/Profile.tsx","components/pages/Profile.tsx","components/Authentication/ForgotPassword/ForgotPassword.tsx","components/pages/ForgotPassword.tsx","components/Authentication/ResetPassword/ResetPassword.tsx","components/pages/ResetPassword.tsx","components/pages/IngredientPage.tsx","images/loader.gif","components/pages/Loader.tsx","components/OrderInfo/OrderInfo.tsx","components/pages/OrderInfoPage.tsx","components/pages/ModalSwitchForOrderInfo.tsx","components/Feed/Feed.tsx","components/pages/FeedPage.tsx","components/pages/ModalSwitch.tsx","images/page404v2.gif","components/pages/Page404.tsx","components/AppHeader/AppHeader.tsx","components/ProtectedRoute.tsx","components/App/App.tsx","reportWebVitals.ts","services/reducers/authReduser.tsx","services/reducers/basicReducer.tsx","services/reducers/wsFeedReducer.tsx","services/reducers/wsReducer.tsx","services/reducers/rootReducer.tsx","services/middleware/socketMiddleware.tsx","index.tsx","css/scrollable.module.css","components/BurgerIngredients/BurgerIngredients.module.css","components/ProfileOrdersListItem/ProfileOrdersListItem.module.css","components/AppHeader/AppHeader.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/Profile/Profile.module.css","components/OrderDetails/OrderDetails.module.css","components/Authentication/Login/Login.module.css","components/Modal/Modal.module.css","components/Authentication/Registration/Registration.module.css","components/Authentication/ForgotPassword/ForgotPassword.module.css","components/Authentication/ResetPassword/ResetPassword.module.css"],"names":["module","exports","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","deleteCookie","getDateTimeInSpecialFormat","someDate","today","result","getDate","getMonth","getFullYear","isToday","offsetHours","Math","ceil","abs","getHours","isYestoday","isDayBeforeYesterday","Intl","DateTimeFormat","year","month","day","weekday","format","hour","minute","getUTCHours","loginRequest","obj","a","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","getUserRequest","Authorization","updateUserRequest","form","refreshTokenRequest","logoutRequest","restorePasswordRequest","resetPasswordRequest","registerRequest","SET_USER_REQUEST","getUser","dispatch","then","res","json","data","success","type","user","catch","error","message","refreshToken","console","log","callback","token","accessToken","authToken","split","signIn","signOut","updateUser","email","password","useAppDispatch","useDispatch","useAppSelector","useSelector","AuthContext","createContext","ProvideAuth","children","auth","state","useEffect","isHasCookie","useProvideAuth","Provider","useAuth","useContext","Login","React","useState","setEmail","setPassword","history","useHistory","useLocation","login","useCallback","e","preventDefault","to","pathname","from","style","className","styles","title","onSubmit","onChange","target","size","textAlign","onClick","LoginPage","display","gap","justifyContent","width","marginLeft","marginRight","BurgerIngredientListItem","useDrag","item","id","_id","collect","monitor","opacity","isDragging","dragRef","cursor","ref","count","alt","src","image","price","BurgerIngredients","basic","selectedIngredientsId","current","currentItems","setState","tabElementsRef","useRef","forBunRef","forSauceRef","forMainRef","getRefByType","tabElementsRef_current","onScroll","previousValue","Array","getUnicleType","map","v","some","currentTarget","scrollTop","offsetTop","addEventListener","removeEventListener","setCurrent","filter","i","indexOf","getItemsByType","getTitleByType","onClickOnItem","onClickOnIngredient","tab","Fragment","active","stylesScrollable","scrollable","length","quantity","quantityData","find","getQuantityCountById","DATA_URL","DATA_URL_CHECKOUT","SET_DATA_REQUEST","SET_SELECTED_INGREDIENTS","SET_ID_FOR_POPUP","DELETE_ID_FOR_POPUP","SET_ORDER_DATA","SET_ORDER_STATUS","actionInitData","ok","Promise","reject","status","getDataRequest","actionSetOrderInfo","orderData","ingredients","orderNumber","order","number","total","setOrderInfoRequest","actionGetOrder","orders","getOrderRequest","DraggableElement","oldIndex","index","useDrop","accept","isHover","isOver","drop","onMoveItem","dropTarget","outline","BurgerConstructor","orderStatus","ingredientItems","val","bunList","ingredientList","useReducer","reduce","currentValue","dispatchTotal","removeIngredientHandler","removeIngredient","checkout","completeCheckout","moveItem","indexFrom","indexTo","tempArray","fromIndex","findIndex","toIndex","temp","concat","addIngredient","isLocked","text","thumbnail","handleClose","bottom","IngredientDetails","element","image_large","calories","proteins","fat","carbohydrates","ModalOverlay","Modal","closeModal","stopPropagation","code","includes","onCloseModalCallback","enable","bind","this","ReactDOM","createPortal","getElementById","Component","OrderDetails","orderInfo","orderAccpeted","HomePage","location","idForPopup","floor","random","DndProvider","backend","HTML5Backend","setIdForPopup","newSelectedIngredientsId","splice","x","push","defaultIngredients","Registration","setName","inputNameRef","onRegistrationHandler","registration","placeholder","errorText","RegistrationPage","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","WS_FEED_CONNECTION_START","WS_FEED_CONNECTION_SUCCESS","WS_FEED_CONNECTION_ERROR","WS_FEED_CONNECTION_CLOSED","WS_FEED_GET_MESSAGE","ProfileOrdersListItem","getIngredientById","getDateTime","time","createdAt","isShowStatus","itemId","ingredient","zIndex","ProfileOrders","profileOrders","maxHeight","onClickProfileOrderItem","Profile","profile","link","alignItems","go","ProfilePage","ForgotPassword","onRestorePasswordkHandler","ForgotPasswordPage","ResetPassword","setToken","inputTokenRef","onResetClickHandler","ResetPasswordPage","IngredientPage","useParams","backgroundColor","Loader","height","objectFit","overflow","loader","OrderInfo","background","action","ordersByNumber","setOrdersByNumber","uniqueIngredients","getCount","OrderInfoPage","paddingTop","ModalSwitchForOrderInfo","exact","path","route","Feed","feed","totalToday","FeedPage","ModalSwitch","Page404","maxWidth","page404","styleForHeaderWrapper","AppHeader","onConstructorClickHandler","ProtectedRoute","rest","isUserLoaded","setUserLoaded","render","App","basename","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialStateAuth","initialState","wsConnected","rootReducer","combineReducers","payload","wsFeedActions","wsInit","wsSendMessage","onOpen","onClose","onError","onMessage","wsActions","socketMiddleware","wsUrl","isNeedToken","store","socket","next","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","onclose","send","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","StrictMode"],"mappings":"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","file":"static/js/main.99121643.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal-background\":\"ModalOverlay_modal-background__qk80X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient-info\":\"IngredientDetails_ingredient-info__6loXl\",\"modal-header\":\"IngredientDetails_modal-header__3PDwV\",\"close-icon-wrapper\":\"IngredientDetails_close-icon-wrapper__13OnE\",\"icon-wrapper\":\"IngredientDetails_icon-wrapper__1D8lD\",\"composition-list\":\"IngredientDetails_composition-list__1xeOY\",\"composition-item\":\"IngredientDetails_composition-item__20BeZ\",\"title\":\"IngredientDetails_title__18oGt\",\"value\":\"IngredientDetails_value__2tnGs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order-info\":\"OrderInfo_order-info__3UWqQ\",\"number\":\"OrderInfo_number__1zoLC\",\"into-modal\":\"OrderInfo_into-modal__1H1M_\",\"name\":\"OrderInfo_name__2ibry\",\"title\":\"OrderInfo_title__3YamM\",\"status\":\"OrderInfo_status__3I20P\",\"complete\":\"OrderInfo_complete__1vm1p\",\"order-elements\":\"OrderInfo_order-elements__NFtUj\",\"order-elements-item\":\"OrderInfo_order-elements-item__6WuqC\",\"image\":\"OrderInfo_image__2a_vJ\",\"total\":\"OrderInfo_total__3F1SA\",\"bottom-block\":\"OrderInfo_bottom-block__2iRLl\",\"time\":\"OrderInfo_time__bIzwI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"Feed_feed__1aF7S\",\"main-title\":\"Feed_main-title__3PbFx\",\"block-aside\":\"Feed_block-aside__15RIh\",\"left-aside\":\"Feed_left-aside__28Yn-\",\"right-aside\":\"Feed_right-aside__19vyd\",\"feed-info\":\"Feed_feed-info__1hZYq\",\"block-status\":\"Feed_block-status__3uUp-\",\"block-ready\":\"Feed_block-ready__2ld8_\",\"block-in-work\":\"Feed_block-in-work__2AQw4\",\"title\":\"Feed_title__3JER_\",\"complete-total\":\"Feed_complete-total__3VcqS\",\"complete-today\":\"Feed_complete-today__yxVwr\"};","export type nameOfCookie = 'token' | 'refresh-token';\r\n\r\nexport function getCookie(name: nameOfCookie) {\r\n  const matches = document.cookie.match(\r\n    new RegExp('(?:^|; )' + name.replace(/([\\\\.$?*|{}\\\\(\\\\)\\\\[\\]\\\\\\\\/\\\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport function setCookie(name: nameOfCookie, value: string, props: any) {\r\n  props = props || {};\r\n  let exp = props.expires || 20 * 60;\r\n  if (typeof exp == 'number' && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + '=' + value;\r\n  for (const propName in props) {\r\n    updatedCookie += '; ' + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += '=' + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name: nameOfCookie) {\r\n  setCookie(name, '', { expires: -1 });\r\n}\r\n\r\nexport function getDateTimeInSpecialFormat(someDate: Date): (string | null) {\r\n\r\n  if (!someDate) {\r\n    return null;\r\n  }\r\n\r\n  const isToday = ((someDate: Date, today: Date): boolean => {\r\n    return someDate.getDate() === today.getDate() &&\r\n      someDate.getMonth() === today.getMonth() &&\r\n      someDate.getFullYear() === today.getFullYear();\r\n  });\r\n\r\n  const isYestoday = ((someDate: Date, today: Date): boolean => {\r\n\r\n    const offsetHours = Math.ceil(Math.abs(someDate.getTime() - today.getTime()) / (1000 * 3600));\r\n\r\n    return offsetHours > today.getHours() && offsetHours < today.getHours() + 24;\r\n  });\r\n\r\n  const isDayBeforeYesterday = ((someDate: Date, today: Date): boolean => {\r\n\r\n    const offsetHours = Math.ceil(Math.abs(someDate.getTime() - today.getTime()) / (1000 * 3600));\r\n\r\n    return offsetHours > today.getHours() + 24 && offsetHours < today.getHours() + 48;\r\n  });\r\n\r\n  someDate = new Date(someDate);\r\n  const today = new Date();\r\n\r\n  let result = ``;\r\n\r\n  if (isToday(someDate, today)) {\r\n    result += `Сегодня`;\r\n  }\r\n  else if (isYestoday(someDate, today)) {\r\n    result += `Вчера`;\r\n  }\r\n  else if (isDayBeforeYesterday(someDate, today)) {\r\n    result += `2 дня назад`;\r\n  } else {\r\n    result += `${new Intl.DateTimeFormat('ru', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' }).format(someDate)}`\r\n  }\r\n\r\n  result += `, `;\r\n  result += `${new Intl.DateTimeFormat('ru', { hour: 'numeric', minute: 'numeric' }).format(someDate)}`;\r\n\r\n  result += ` i-GMT`;\r\n  result += `${someDate.getHours() - someDate.getUTCHours() > 0 ? \"+\" : \"-\"}`;\r\n  result += `${someDate.getHours() - someDate.getUTCHours()}`;\r\n\r\n  return result;\r\n};","import { getCookie } from './utils';\r\n\r\nexport const deserializeQuery = (query: string, noQuestionMark = false) => {\r\n    const pairs = (noQuestionMark ? query : query.substring(1)).split('&');\r\n    const array = pairs.map((elem: string) => elem.split('='));\r\n    return Object.fromEntries(array);\r\n};\r\n\r\nexport const serializeQuery = (queryParams: object) =>\r\n    Object.entries(queryParams).reduce((acc, [key, value], index, array) => {\r\n        if (typeof value === 'undefined') {\r\n            return acc;\r\n        }\r\n        const postfix = index === array.length - 1 ? '' : '&';\r\n        return `${acc}${encodeURIComponent(key)}=${encodeURIComponent(`${value}`)}${postfix}`;\r\n    }, '?');\r\n\r\nexport const loginRequest = async (obj: { email: string, password: string }) => {\r\n    return await fetch('https://norma.nomoreparties.space/api/auth/login', {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify(obj)\r\n    });\r\n};\r\n\r\nexport const getUserRequest = async () =>\r\n  await fetch('https://norma.nomoreparties.space/api/auth/user', {\r\n    method: 'GET',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + getCookie('token')\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer'\r\n  });\r\n\r\nexport const updateUserRequest = async (form: object) =>\r\n    await fetch('https://norma.nomoreparties.space/api/auth/user', {\r\n        method: 'PATCH',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: 'Bearer ' + getCookie('token')\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify(form)\r\n    });\r\n\r\nexport const refreshTokenRequest = async (obj: { token: string }) =>\r\n    await fetch('https://norma.nomoreparties.space/api/auth/token', {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify(obj)\r\n    });\r\n\r\nexport const logoutRequest = async (obj: { token: string }) => {\r\n    return await fetch('https://norma.nomoreparties.space/api/auth/logout', {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify(obj)\r\n    })\r\n};\r\n\r\nexport const restorePasswordRequest = async (obj: { email: string }) => {\r\n    return await fetch('https://norma.nomoreparties.space/api/password-reset', {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify(obj)\r\n    });\r\n};\r\n\r\nexport const resetPasswordRequest = async (obj: { password: string, token: string }) => {\r\n    return await fetch('https://norma.nomoreparties.space/api/password-reset/reset', {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify(obj)\r\n    });\r\n};\r\n\r\nexport const registerRequest = async (form: { name: string, email: string, password: string }) => {\r\n    return await fetch('https://norma.nomoreparties.space/api/auth/register', {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify(form)\r\n    });\r\n};\r\n","import { Dispatch } from 'redux';\r\nimport { AppDispatch, AppThunk } from '../../utils/types';\r\nimport {\r\n    getUserRequest,\r\n    loginRequest,\r\n    logoutRequest,\r\n    refreshTokenRequest,\r\n    registerRequest,\r\n    resetPasswordRequest,\r\n    restorePasswordRequest,\r\n    updateUserRequest\r\n} from \"../authApi\";\r\nimport { deleteCookie, getCookie, setCookie } from \"../utils\";\r\n\r\nexport const SET_USER_REQUEST: 'SET_USER_REQUEST' = 'SET_USER_REQUEST';\r\n\r\nexport interface ISetUserRequest {\r\n    readonly type: typeof SET_USER_REQUEST,\r\n    readonly user: {\r\n        email: string\r\n    } | null,\r\n}\r\n\r\nexport type TAythDispatchType = | ISetUserRequest;\r\n\r\nexport const getUser: AppThunk = function () {\r\n\r\n    return function (dispatch: AppDispatch | AppThunk) {\r\n\r\n        getUserRequest()\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.success) {\r\n                    //setUser({ ...data.user, id: data.user.email });\r\n                    dispatch({\r\n                        type: SET_USER_REQUEST,\r\n                        user: data.user\r\n                    });\r\n\r\n                }\r\n                return data.success;\r\n            })\r\n            .catch((error) => {\r\n                if (error.message === 'jwt expired') {\r\n                    return dispatch(refreshToken(getUser));\r\n                } else {\r\n                    console.log(error);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const refreshToken: AppThunk = function (callback: Function) {\r\n\r\n    return function (dispatch: AppDispatch) {\r\n\r\n        refreshTokenRequest({ token: getCookie('refresh-token') || '' })\r\n            .then(res => {\r\n                return res.json();\r\n            })\r\n            .then((data: any) => {\r\n\r\n                if (data.accessToken) {\r\n                    const authToken = data.accessToken.split('Bearer ')[1];\r\n\r\n                    if (authToken) {\r\n                        setCookie('token', authToken, null);\r\n                    }\r\n                }\r\n\r\n                if (data.refreshToken) {\r\n                    setCookie('refresh-token', data.refreshToken, null);\r\n                }\r\n\r\n                if (data.success && data.user) {\r\n                    dispatch({\r\n                        type: SET_USER_REQUEST,\r\n                        user: data.user\r\n                    });\r\n                }\r\n\r\n                dispatch(callback());\r\n\r\n                return data;\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n};\r\n\r\nexport const signIn: AppThunk = function (form: { email: string, password: string }) {\r\n\r\n    return function (dispatch: Dispatch<ISetUserRequest>) {\r\n\r\n        loginRequest(form)\r\n            .then(res => {\r\n                return res.json();\r\n            })\r\n            .then(data => {\r\n\r\n                if (data.accessToken) {\r\n                    const authToken = data.accessToken.split('Bearer ')[1];\r\n\r\n                    if (authToken) {\r\n                        setCookie('token', authToken, null);\r\n                    }\r\n                }\r\n\r\n                if (data.refreshToken) {\r\n                    setCookie('refresh-token', data.refreshToken, null);\r\n                }\r\n\r\n                if (data?.success) {\r\n                    dispatch({\r\n                        type: SET_USER_REQUEST,\r\n                        user: data.user\r\n                    });\r\n                }\r\n\r\n                return data;\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n\r\n    }\r\n};\r\n\r\nexport const signOut: AppThunk = function () {\r\n\r\n    return function (dispatch: AppDispatch | AppThunk) {\r\n\r\n        const token = getCookie('refresh-token') || '';\r\n\r\n        dispatch({\r\n            type: SET_USER_REQUEST,\r\n            user: null\r\n        });\r\n\r\n        deleteCookie('token');\r\n        deleteCookie('refresh-token');\r\n\r\n        logoutRequest({ token: token })\r\n            .catch((error) => {\r\n                if (error.message === 'jwt expired') {\r\n                    return dispatch(refreshToken(signOut));\r\n                }\r\n            });;\r\n\r\n    }\r\n\r\n};\r\n\r\nexport const signUp: AppThunk = function (form: { name: string, password: string, email: string }) {\r\n\r\n    return function (dispatch: AppDispatch) {\r\n\r\n        registerRequest(form)\r\n            .then(res => {\r\n                return res.json();\r\n            })\r\n            .then(data => {\r\n\r\n                if (data.accessToken) {\r\n                    const authToken = data.accessToken.split('Bearer ')[1];\r\n\r\n                    if (authToken) {\r\n                        setCookie('token', authToken, null);\r\n                    }\r\n                }\r\n\r\n                if (data.refreshToken) {\r\n                    setCookie('refresh-token', data.refreshToken, null);\r\n                }\r\n\r\n                if (!data.success) {\r\n                    console.log(data.message)\r\n                }\r\n\r\n                if (data?.success) {\r\n                    dispatch({\r\n                        type: SET_USER_REQUEST,\r\n                        user: data.user\r\n                    });\r\n                }\r\n\r\n                return data;\r\n            })\r\n            .catch((error) => {\r\n                console.log(error)\r\n            });\r\n    }\r\n}\r\n\r\nexport const restorePassword: AppThunk = function (form: { email: string }) {\r\n\r\n    return function (dispatch: AppDispatch) {\r\n\r\n        const data = restorePasswordRequest(form)\r\n            .then(res => {\r\n                return res.json();\r\n            })\r\n            .then(data => {\r\n\r\n                if (!data.success) {\r\n                    console.log(data.message)\r\n                }\r\n\r\n                return data;\r\n            })\r\n            .catch((error) => {\r\n                console.log(error)\r\n            });\r\n\r\n        return data;\r\n    }\r\n}\r\n\r\nexport const resetPassword: AppThunk = function (form: { token: string, password: string }) {\r\n\r\n    return function (dispatch: Dispatch) {\r\n\r\n        const data = resetPasswordRequest(form)\r\n            .then(res => {\r\n                return res.json();\r\n            })\r\n            .then(data => {\r\n\r\n                if (!data.success) {\r\n                    console.log(data.message)\r\n                }\r\n\r\n                return data;\r\n            })\r\n            .catch((error) => {\r\n                console.log(error)\r\n            });\r\n\r\n        return data;\r\n    }\r\n}\r\n\r\nexport const updateUser: AppThunk = function (form: { name: string, email: string, password: string }) {\r\n\r\n    return function (dispatch: AppDispatch | AppThunk) {\r\n\r\n        const data = updateUserRequest(form)\r\n            .then(res => {\r\n                return res.json();\r\n            })\r\n            .then(data => {\r\n\r\n                if (!data.success) {\r\n                    console.log(data.message)\r\n                }\r\n\r\n                return data;\r\n            })\r\n            .then((data) => {\r\n\r\n                if (data.success) {\r\n                    dispatch(signOut());\r\n                }\r\n\r\n                return data;\r\n            })\r\n            .then((data) => {\r\n\r\n                if (data.success) {\r\n                    dispatch(signIn({ email: form.email, password: form.password }));\r\n                }\r\n\r\n                return data;\r\n            })\r\n            .catch((error) => {\r\n                if (error.message === 'jwt expired') {\r\n                    return dispatch(refreshToken(updateUser));\r\n                }\r\n                console.log(error)\r\n            });\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport { AppDispatch, AppThunk, RootState } from './types';\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch | AppThunk>()\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\r\n","import { useContext, createContext, useEffect } from 'react';\r\n\r\nimport { getCookie } from './utils';\r\nimport { getUser } from './actions/auth';\r\nimport { useAppDispatch, useAppSelector } from '../utils/hooks';\r\n\r\nconst AuthContext = createContext<any>(undefined);\r\n\r\nexport function ProvideAuth(obj: any) {\r\n\r\n  const { children } = obj;\r\n\r\n  const auth = useProvideAuth();\r\n\r\n  return <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport function useProvideAuth() {\r\n\r\n  const { user } = useAppSelector(state => state.auth);\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n\r\n    dispatch(getUser());\r\n\r\n  }, [dispatch]);\r\n\r\n  const isHasCookie = () => {\r\n\r\n    const isHas = !!(getCookie('token') && getCookie('refresh-token'));\r\n\r\n    return isHas;\r\n  }\r\n\r\n  return {\r\n    user,\r\n    isHasCookie,\r\n  };\r\n}\r\n","import { EmailInput, PasswordInput, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React from \"react\";\r\nimport styles from './Login.module.css';\r\nimport { useHistory, useLocation, Redirect } from 'react-router-dom';\r\nimport { useAuth } from '../../../services/auth';\r\nimport { useCallback } from \"react\";\r\nimport { signIn } from \"../../../services/actions/auth\";\r\nimport { LocationExtention, RootState } from \"../../../utils/types\";\r\nimport { useAppDispatch } from \"../../../utils/hooks\";\r\n\r\nfunction Login() {\r\n\r\n    const auth = useAuth();\r\n    const dispatch = useAppDispatch();\r\n\r\n    //process.env.NODE_ENV !== 'production' // TODO\r\n    \r\n    const [email, setEmail] = React.useState('') //bisotow677@bushdown.com\r\n    const onEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setEmail(e.target.value)\r\n    }\r\n\r\n    const [password, setPassword] = React.useState('')  //123456\r\n    const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setPassword(e.target.value)\r\n    }\r\n\r\n    const history = useHistory();\r\n    const { state } = useLocation<RootState & LocationExtention>();\r\n\r\n    const onRegisterHandler = () => {\r\n        history.replace({ pathname: '/register', state });\r\n    }\r\n\r\n    const onForgotPassword = () => {\r\n        history.replace({ pathname: '/forgot-password', state });\r\n    }\r\n\r\n    const login = useCallback(\r\n        (e) => {\r\n            e.preventDefault();\r\n            dispatch(signIn({ email, password }));\r\n        },\r\n        [email, password, dispatch]\r\n    );\r\n\r\n    if (auth.isHasCookie()) {\r\n        return (\r\n            <Redirect\r\n                to={{\r\n                    pathname: state?.from?.pathname || '/'\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <section style={{}} className={styles[\"login\"] + \" \"}>\r\n\r\n            <div className={styles.title + \" text text_type_main-default\"}>\r\n                Вход\r\n            </div>\r\n\r\n            <form className={styles.form + \" pt-5 pb-20\"} onSubmit={(e) => { login(e) }}>\r\n\r\n                <EmailInput onChange={onEmailChange} value={email} name={'E-mail'} />\r\n\r\n                <PasswordInput onChange={onPasswordChange} value={password} name={'Пароль'} />\r\n\r\n                {email !== '' && password !== '' &&\r\n                    <Button type=\"primary\" size=\"medium\">\r\n                        Войти\r\n                    </Button>\r\n                }\r\n                \r\n            </form>\r\n\r\n            <div style={{ textAlign: \"center\" }} className={styles[\"title-bottom\"] + \" pt-4 text text_type_main-default\"}>\r\n                Вы новый пользователь?\r\n                <Button type=\"secondary\" size=\"medium\" onClick={onRegisterHandler}>\r\n                    Зарегистрироваться\r\n                </Button>\r\n            </div>\r\n\r\n            <div style={{ textAlign: \"center\" }} className={styles[\"title-bottom\"] + \" pt-4 text text_type_main-default\"}>\r\n                Забыли пароль?\r\n                <Button type=\"secondary\" size=\"medium\" onClick={onForgotPassword}>\r\n                    Восстановить пароль\r\n                </Button>\r\n            </div>\r\n\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","import Login from \"../Authentication/Login/Login\";\r\n\r\nexport function LoginPage() {\r\n\r\n    const mainWrapperStyle = {\r\n        display: 'flex',\r\n        gap: 'calc(var(--offset-base-size) * 10)',\r\n        justifyContent: 'space-evenly',\r\n\r\n        width: 'calc(var(--offset-base-size) * 320)',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto'\r\n    };\r\n\r\n    return (\r\n        <section className=\"main\">\r\n            <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n                <Login />\r\n\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n","import IDataItem from '../../utils/Interfaces/IDataItem';\r\n\r\nimport {\r\n    Counter,\r\n    CurrencyIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from '../BurgerIngredients/BurgerIngredients.module.css';\r\n\r\nimport { useDrag } from \"react-dnd\";\r\n\r\nfunction BurgerIngredientListItem(props: {\r\n    item: IDataItem,\r\n    quantity: number,\r\n    count: number,\r\n    onClickOnItem: (item: IDataItem) => void\r\n}) {\r\n\r\n\r\n    const [{ opacity }, dragRef] = useDrag({\r\n        type: 'add-ingredient',\r\n        item: {\r\n            id: props.item._id,\r\n        },\r\n        collect: monitor => ({\r\n            opacity: monitor.isDragging() ? 0 : 1,\r\n        })\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <div style={{ opacity: opacity, cursor: 'grab' }} ref={dragRef}>\r\n\r\n                <div className={styles[\"counter-wrapper\"]}>\r\n                    {props.count > 0 ?\r\n                        <Counter count={props.count} size=\"default\" />\r\n                        : null}\r\n                </div>\r\n\r\n                {/* TODO сначала не понял для чего нужен счетчик, думал это количество выбранных элементов, а оказалось количество оставшихся */}\r\n                {/* <div className=\"counter-wrapper counter-wrapper-left\">\r\n                    {props.quantity > 0 ? \r\n                        <Counter count={props.quantity} size=\"default\" /> \r\n                        : null}\r\n                </div> */}\r\n\r\n                <div className={`${styles[\"illustration\"]} pl-4 pr-4`}>\r\n                    <img alt=\"illustration\" src={props.item.image} />\r\n                </div>\r\n\r\n                <div className={`${styles[\"price-block\"]} pt-1 pb-1`}>\r\n                    <span className={`${styles.price} text text_type_digits-medium`}>{props.item.price}</span>\r\n                    <CurrencyIcon type=\"primary\" />\r\n                </div>\r\n\r\n                <div className={`${styles[\"item-name\"]} text text_type_main-medium`}>\r\n                    {props.item.name}\r\n                </div>\r\n\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BurgerIngredientListItem;","import React, { useEffect, useRef } from 'react';\r\n\r\nimport {\r\n    Tab,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './BurgerIngredients.module.css';\r\nimport stylesScrollable from '../../css/scrollable.module.css';\r\n\r\nimport IDataItem from '../../utils/Interfaces/IDataItem';\r\n\r\nimport BurgerIngredientListItem from '../BurgerIngredientListItem/BurgerIngredientListItem';\r\n\r\n//import { BurgerConstructorContext } from '../../services/BurgerConstructorContext';\r\n\r\nimport { IBurgerIngredientsProps } from '../../utils/Interfaces/IBurgerIngredientsProps';\r\n\r\nimport { IBurgerIngredientsState } from '../../utils/Interfaces/IBurgerIngredientsState';\r\n\r\nimport { useAppSelector } from '../../utils/hooks';\r\n\r\nfunction BurgerIngredients(props: IBurgerIngredientsProps) {\r\n\r\n    //const { selectedIngredientsId, addIngredient } = React.useContext<{ selectedIngredientsId: string[], addIngredient: (id: string) => void }>(BurgerConstructorContext);\r\n    const { selectedIngredientsId, data } = useAppSelector(state => state.basic);\r\n\r\n    const [state, setState] = React.useState<IBurgerIngredientsState>({ current: 'bun', currentItems: data });\r\n\r\n    const tabElementsRef = useRef<HTMLUListElement>(null);\r\n    const forBunRef = useRef<HTMLLIElement>(null);\r\n    const forSauceRef = useRef<HTMLLIElement>(null);\r\n    const forMainRef = useRef<any>(null);\r\n\r\n    const getRefByType = (type: string) => {\r\n\r\n        if (type === 'bun') {\r\n            return forBunRef;\r\n        } else if (type === 'sauce') {\r\n            return forSauceRef;\r\n        } else if (type === 'main') {\r\n            return forMainRef;\r\n        };\r\n\r\n    }\r\n\r\n    const tabElementsRef_current = tabElementsRef.current;\r\n\r\n    useEffect(() => {\r\n\r\n        const onScroll = (e: any) => {\r\n\r\n            // console.log('-------------------------------');\r\n\r\n            // console.log(`e.currentTarget.scrollTop  ${e.currentTarget.scrollTop}`);\r\n\r\n            // console.log(`forBunRef\\toffsetHeight: ${forBunRef.current?.offsetHeight}\\toffsetTop: ${forBunRef.current?.offsetTop}\\tscrollTop: ${forBunRef.current?.scrollTop}\\tdistance: ${forBunRef.current?.offsetTop - e.currentTarget?.scrollTop}   `);\r\n            // console.log(`forMainRef\\toffsetHeight: ${forMainRef.current?.offsetHeight}\\toffsetTop: ${forMainRef.current?.offsetTop}\\tscrollTop: ${forMainRef.current?.scrollTop}\\tdistance: ${forMainRef.current?.offsetTop - e.currentTarget?.scrollTop}  `);\r\n            // console.log(`forSauceRef\\toffsetHeight: ${forSauceRef.current?.offsetHeight}\\toffsetTop: ${forSauceRef.current?.offsetTop}\\tscrollTop: ${forSauceRef.current?.scrollTop}\\tdistance: ${forSauceRef.current?.offsetTop - e.currentTarget?.scrollTop} `);\r\n\r\n            ////    old version\r\n            // if (0 < e.currentTarget.scrollTop && e.currentTarget.scrollTop < forBunRef.current?.offsetTop) {\r\n            //     //console.log(getTitleByType(forBunRef.current?.getAttribute('data-type')));\r\n            //     setState({ ...state, current: forBunRef.current?.getAttribute('data-type') });\r\n            // } else if (forBunRef.current?.offsetTop < e.currentTarget.scrollTop && e.currentTarget.scrollTop < (forBunRef.current?.offsetTop + forMainRef.current?.offsetTop)) {\r\n            //     //console.log('начинка');\r\n            //     setState({ ...state, current: 'main' });\r\n            // } else if ((forBunRef.current?.offsetTop + forMainRef.current?.offsetTop) < e.currentTarget.scrollTop && e.currentTarget.scrollTop < (forBunRef.current?.offsetTop + forMainRef.current?.offsetTop + forSauceRef.current?.offsetTop)) {\r\n            //     //console.log('соус');\r\n            //     setState({ ...state, current: 'sauce' });\r\n            // }\r\n\r\n            let previousValue = 0;\r\n            Array.from(getUnicleType(state.currentItems))\r\n                .map((v) => {\r\n                    return {\r\n                        ref: getRefByType(v),\r\n                        type: v\r\n                    }\r\n                })\r\n                .some((v) => {\r\n\r\n                    if (previousValue < e.currentTarget.scrollTop && e.currentTarget.scrollTop < v.ref?.current?.offsetTop) {\r\n\r\n                        setState({ ...state, current: v.type });\r\n\r\n                        return true;\r\n\r\n                    } else {\r\n\r\n                        previousValue += v.ref?.current?.offsetTop;\r\n\r\n                        return false;\r\n                    }\r\n\r\n                });\r\n\r\n        };\r\n\r\n        tabElementsRef_current?.addEventListener(\"scroll\", onScroll);\r\n\r\n        return () => tabElementsRef_current?.removeEventListener(\"scroll\", onScroll);\r\n\r\n    }, [tabElementsRef, state, tabElementsRef_current]);\r\n\r\n    const setCurrent = (value: string) => {\r\n        setState({\r\n            ...state,\r\n            current: value,\r\n            currentItems: Array.from<IDataItem>(data).filter((v: IDataItem) => { return v.type === value })\r\n        });\r\n    };\r\n\r\n    const getUnicleType = (data: IDataItem[]) => {\r\n        return Array.from(data)\r\n            .map(function (v: IDataItem) { return v.type; })\r\n            .filter(function (v, i, a) { return a.indexOf(v) === i; });\r\n    };\r\n\r\n    const getItemsByType = (type: string, data: IDataItem[]) => {\r\n\r\n        if (type === '') {\r\n            return data;\r\n        } else {\r\n            return data.filter((v: IDataItem) => { return v.type === type });\r\n        }\r\n\r\n    };\r\n\r\n    const getSelectedCountById = (id: string) => {\r\n        return Array.from(selectedIngredientsId).filter((v: string) => v === id).length;\r\n    }\r\n\r\n    const getQuantityCountById = (id: string) => {\r\n        return props.quantityData.find((v: { id: string, quantity: number }) => v.id === id)?.quantity || 0;\r\n    }\r\n\r\n    const getTitleByType = (current: string) => {\r\n\r\n        let title = '';\r\n\r\n        if (current === 'bun') {\r\n            title = 'Булки';\r\n        } else if (current === 'sauce') {\r\n            title = 'Соусы';\r\n        } else if (current === 'main') {\r\n            title = 'Начинка';\r\n        };\r\n\r\n        return title;\r\n    };\r\n\r\n    const onClickOnItem = (item: IDataItem) => {\r\n\r\n        props.onClickOnIngredient(item._id);\r\n        //this.props.setIdForPopup(item._id);\r\n    }\r\n\r\n    return (\r\n        <div className={styles[\"burger-ingredients\"]}>\r\n\r\n            <div className=\"text text_type_main-large mt-10 mb-5\">\r\n                Соберите бургер\r\n            </div>\r\n\r\n            <div className={styles[\"tab-bar\"] + \" mt-5 mb-10\"}>\r\n                {['bun', 'sauce', 'main'].map((tab: string, i) => {\r\n                    return (\r\n                        <React.Fragment key={tab}>\r\n                            <Tab value={tab}\r\n                                active={state.current === tab}\r\n                                onClick={setCurrent}\r\n                            >\r\n                                {getTitleByType(tab)}\r\n                            </Tab>\r\n                        </React.Fragment>\r\n                    )\r\n                })}\r\n            </div>\r\n\r\n            <ul className={`${styles[\"tab-elements\"]} ${stylesScrollable.scrollable}`} ref={tabElementsRef}>\r\n\r\n                {/* TODO задел на то, что типы в исходном json могут быть еще добавлены и не придется переписывать много логики */}\r\n                {getUnicleType(state.currentItems).map((type, i) => {\r\n\r\n                    return (\r\n                        <li key={type} ref={getRefByType(type)} data-type={type}>\r\n\r\n                            <div className=\"text text_type_main-medium\">\r\n                                {getTitleByType(type)}\r\n                            </div>\r\n\r\n                            <ul className={`${styles[\"ingredients-list\"]} pt-6 pl-4 pr-4 pb-10`}>\r\n\r\n                                {getItemsByType(type, state.currentItems).map((item: IDataItem) => {\r\n\r\n                                    let count = getSelectedCountById(item._id);\r\n                                    let quantity = getQuantityCountById(item._id);\r\n\r\n                                    return (\r\n                                        // TODO если вот так, то не ругается на обязательный key  \r\n                                        <li\r\n                                            key={item._id}\r\n                                            className={styles[\"list-item\"]}\r\n                                            onClick={() => onClickOnItem(item)}\r\n                                        >\r\n                                            <BurgerIngredientListItem\r\n                                                item={item}\r\n                                                quantity={quantity}\r\n                                                count={count}\r\n                                                onClickOnItem={onClickOnItem}\r\n                                            />\r\n                                        </li>\r\n                                    )\r\n                                })}\r\n\r\n                            </ul>\r\n\r\n                        </li>\r\n                    )\r\n                })}\r\n\r\n            </ul>\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BurgerIngredients;","import { TOrderInfo } from \"../utils/Interfaces/IBasicState\";\r\nimport { getCookie } from \"./utils\";\r\n\r\nconst DATA_URL = 'https://norma.nomoreparties.space/api/ingredients';\r\nconst DATA_URL_CHECKOUT = 'https://norma.nomoreparties.space/api/orders';\r\n\r\nexport const getDataRequest = (url: string = '') => {\r\n\r\n    return fetch(url || DATA_URL)\r\n        .then(result => {\r\n            if (result.ok) {\r\n                return result.json();\r\n            }\r\n            return Promise.reject(`Ошибка ${result.status}`);\r\n        })\r\n        .then(\r\n            (result) => {\r\n\r\n                if (result && result.success) {\r\n\r\n                    return result.data;\r\n\r\n                } else {\r\n                    console.log(result);\r\n                }\r\n\r\n            },\r\n            // Примечание: важно обрабатывать ошибки именно здесь, а не в блоке catch(),\r\n            // чтобы не перехватывать исключения из ошибок в самих компонентах.\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n\r\n};\r\n\r\nexport const setOrderInfoRequest = (orderData: TOrderInfo) => {\r\n\r\n    return fetch(DATA_URL_CHECKOUT, {\r\n        method: 'post',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: 'Bearer ' + getCookie('token')\r\n        },\r\n        body: JSON.stringify({\r\n            ingredients: orderData.selectedIngredientsId\r\n        })\r\n    })\r\n        .then(result => {\r\n            if (result.ok) {\r\n                return result.json();\r\n            }\r\n            return Promise.reject(`Ошибка ${result.status}`);\r\n        })\r\n        .then(\r\n            (result) => {\r\n\r\n                if (result && result.success) {\r\n\r\n                    orderData = {\r\n                        orderNumber: result.order.number,\r\n                        selectedIngredientsId: orderData.selectedIngredientsId,\r\n                        total: orderData.total\r\n                    }\r\n\r\n                    return orderData;\r\n\r\n                } else {\r\n                    console.log(result);\r\n                }\r\n\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n\r\n};\r\n\r\nexport const getOrderRequest = (orderNumber: number) => {\r\n\r\n    return fetch(`${DATA_URL_CHECKOUT}/${orderNumber}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n        .then((result) => {\r\n            if (result.ok) {\r\n                return result.json();\r\n            }\r\n            return Promise.reject(`Ошибка`);\r\n        })\r\n        .then(\r\n            (result) => {\r\n\r\n                if (result && result.success) {\r\n\r\n                    return result.orders;\r\n\r\n                } else {\r\n                    console.log(result);\r\n                }\r\n\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n\r\n};","import { getDataRequest, getOrderRequest, setOrderInfoRequest } from '../api';\r\nimport IDataItem from '../../utils/Interfaces/IDataItem';\r\nimport { TOrderInfo } from '../../utils/Interfaces/IBasicState';\r\nimport { Dispatch } from 'redux';\r\nimport { AppDispatch, AppThunk } from '../../utils/types';\r\n\r\nexport const SET_DATA_REQUEST: 'SET_DATA_REQUEST' = 'SET_DATA_REQUEST';\r\nexport const SET_SELECTED_INGREDIENTS: 'SET_SELECTED_INGREDIENTS' = 'SET_SELECTED_INGREDIENTS';\r\nexport const SET_ID_FOR_POPUP: 'SET_ID_FOR_POPUP' = 'SET_ID_FOR_POPUP';\r\nexport const DELETE_ID_FOR_POPUP: 'DELETE_ID_FOR_POPUP' = 'DELETE_ID_FOR_POPUP';\r\nexport const SET_ORDER_DATA: 'SET_ORDER_DATA' = 'SET_ORDER_DATA';\r\nexport const SET_ORDER_STATUS: 'SET_ORDER_STATUS' = 'SET_ORDER_STATUS';\r\n\r\nexport type TBasicActionsType =\r\n    typeof SET_DATA_REQUEST |\r\n    typeof SET_SELECTED_INGREDIENTS |\r\n    typeof SET_ID_FOR_POPUP |\r\n    typeof DELETE_ID_FOR_POPUP |\r\n    typeof SET_ORDER_DATA |\r\n    typeof SET_ORDER_STATUS;\r\n\r\nexport interface ISetDataRequest {\r\n    readonly type: typeof SET_DATA_REQUEST;\r\n    readonly data: IDataItem[];\r\n}\r\n\r\nexport interface ISetSelectedIngredients {\r\n    readonly type: typeof SET_SELECTED_INGREDIENTS;\r\n    readonly selectedIngredientsId: string[];\r\n}\r\n\r\nexport interface ISetIdForPopup {\r\n    readonly type: typeof SET_ID_FOR_POPUP;\r\n    readonly idForPopup: string;\r\n}\r\n\r\nexport interface IDeleteIdForPopup {\r\n    readonly type: typeof DELETE_ID_FOR_POPUP;\r\n    readonly idForPopup: null;\r\n}\r\n\r\nexport interface ISetOrderData {\r\n    readonly type: typeof SET_ORDER_DATA;\r\n    readonly orderData: TOrderInfo;\r\n}\r\n\r\nexport interface ISetOrderStatus {\r\n    readonly type: typeof SET_ORDER_STATUS;\r\n    readonly status: 'ERROR' | 'IN_PROGRESS' | null;\r\n}\r\n\r\nexport type TBasicDispatchType = | ISetDataRequest | ISetSelectedIngredients | ISetIdForPopup | IDeleteIdForPopup | ISetOrderData | ISetOrderStatus;\r\n\r\nexport const actionInitData: AppThunk = function () {\r\n\r\n    return function (dispatch: Dispatch<ISetDataRequest>) {\r\n\r\n        getDataRequest()\r\n            .then(data => {\r\n\r\n                dispatch({\r\n                    type: SET_DATA_REQUEST,\r\n                    data: Array.from<IDataItem>(data)\r\n                });\r\n\r\n                //// demo\r\n                // const defaultSelectedIngredientsId = Array.from<string>([]);\r\n                // let defaultBunIngredientId = data.filter((v: IDataItem) => { return v.type === 'bun' }).sort(() => Math.random() - 0.5).find(() => { return true })?._id;\r\n\r\n                // defaultSelectedIngredientsId.push(defaultBunIngredientId);\r\n                // defaultSelectedIngredientsId.push(defaultBunIngredientId);\r\n\r\n                // defaultSelectedIngredientsId.push(data.filter((v: IDataItem) => { return v.type !== 'bun' }).sort(() => Math.random() - 0.5).find(() => { return true })?._id);\r\n                // defaultSelectedIngredientsId.push(data.filter((v: IDataItem) => { return v.type !== 'bun' }).sort(() => Math.random() - 0.5).find(() => { return true })?._id);\r\n                // defaultSelectedIngredientsId.push(data.filter((v: IDataItem) => { return v.type !== 'bun' }).sort(() => Math.random() - 0.5).find(() => { return true })?._id);\r\n\r\n                // dispatch({\r\n                //     type: SET_SELECTED_INGREDIENTS,\r\n                //     selectedIngredientsId: defaultSelectedIngredientsId\r\n                // });\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    };\r\n}\r\n\r\nexport const actionSetOrderInfo: AppThunk = function (orderData: TOrderInfo) {\r\n\r\n    return function (dispatch: AppDispatch) {\r\n\r\n        setOrderInfoRequest(orderData)\r\n            .then(orderData => {\r\n\r\n                dispatch({\r\n                    type: SET_ORDER_DATA,\r\n                    orderData: orderData as TOrderInfo\r\n                });\r\n\r\n            })\r\n            .then(() => {\r\n\r\n                dispatch({\r\n                    type: SET_ORDER_STATUS,\r\n                    status: null\r\n                });\r\n\r\n            })\r\n            .catch((error) => {\r\n\r\n                dispatch({\r\n                    type: SET_ORDER_STATUS,\r\n                    status: \"ERROR\"\r\n                });\r\n\r\n                console.log(error);\r\n            })\r\n\r\n    }\r\n}\r\n\r\nexport const actionGetOrder: AppThunk = function (orderNumber: number) {\r\n\r\n    return function (dispatch: AppDispatch) {\r\n\r\n        return getOrderRequest(orderNumber)\r\n            .then(orders => {\r\n\r\n                return orders;\r\n            });\r\n\r\n    }\r\n}","import { DropTargetMonitor, useDrag, useDrop } from \"react-dnd\";\r\n\r\nfunction DraggableElement(props: { id: string, index: number, onMoveItem: Function, children: React.ReactNode }) {\r\n\r\n    const [{ opacity }, dragRef] = useDrag({\r\n        type: 'constructor-ingredients',\r\n        item: {\r\n            id: props.id,\r\n            oldIndex: props.index\r\n        },\r\n        collect: monitor => ({\r\n            opacity: monitor.isDragging() ? 0 : 1,\r\n        })\r\n    });\r\n\r\n    const [{ isHover }, dropTarget] = useDrop({\r\n        accept: 'constructor-ingredients',\r\n        collect: (monitor: DropTargetMonitor) => ({\r\n            isHover: monitor.isOver()\r\n        }),\r\n        drop(item: {id:number, oldIndex:number}) {\r\n\r\n            props.onMoveItem(item.id, props.id, item.oldIndex, props.index);\r\n\r\n        },\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <span style={{ \r\n                outline: `2px dashed ${isHover ? '#4c4cff' : 'transparent'}`,\r\n                //  paddingBottom: `${isHover ? '100px' : '0'}`\r\n                 }} ref={dragRef}>\r\n                <span style={{ \r\n                    opacity: opacity, \r\n                    cursor: 'grab', \r\n                    // display: `${opacity === 0 ? 'none' : 'inherit'}` \r\n                    }} ref={dropTarget}>\r\n\r\n                    {props.children}\r\n\r\n                </span>\r\n            </span>\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default DraggableElement;","import React, { useReducer } from 'react';\r\n\r\nimport {\r\n    Button,\r\n    CurrencyIcon,\r\n    ConstructorElement,\r\n    DragIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './BurgerConstructor.module.css';\r\nimport stylesScrollable from '../../css/scrollable.module.css';\r\n\r\nimport { useEffect } from 'react';\r\n\r\nimport { SET_ORDER_STATUS, SET_SELECTED_INGREDIENTS } from '../../services/actions/basic';\r\n\r\nimport IDataItem from '../../utils/Interfaces/IDataItem';\r\n\r\n//import { BurgerConstructorContext } from '../../services/BurgerConstructorContext';\r\n//import { IBurgerConstructorContext } from '../../utils/Interfaces/IBurgerConstructorContext';\r\n\r\nimport DraggableElement from './DraggableElement';\r\n\r\nimport { DropTargetMonitor, useDrop } from \"react-dnd\";\r\nimport { TOrderInfo } from '../../utils/Interfaces/IBasicState';\r\nimport { useAppDispatch, useAppSelector } from '../../utils/hooks';\r\n\r\nfunction BurgerConstructor(props: { removeIngredient: (id: string) => void, addIngredient: (id: string) => void, completeCheckout: (orderData: TOrderInfo) => void }) {\r\n\r\n    //const { selectedIngredientsId, removeIngredient } = React.useContext<IBurgerConstructorContext>(BurgerConstructorContext);\r\n    const { selectedIngredientsId, data, orderStatus } = useAppSelector(state => state.basic);\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    const ingredientItems = Array.from<string>(selectedIngredientsId)\r\n        .map((v: string) => {\r\n            return data.find((val: IDataItem) => { return val._id === v; })\r\n        }) as IDataItem[];\r\n\r\n    const bunList = ingredientItems\r\n        .filter((v: (IDataItem)) => { return v?.type === 'bun' })\r\n        .filter((v: (IDataItem), i: number, a: (IDataItem)[]) => { return a.indexOf(v) === i; });\r\n\r\n    const ingredientList = ingredientItems\r\n        .filter((v: IDataItem) => { return v.type !== 'bun' });\r\n\r\n    const [total, dispatchTotal] = useReducer(((state: number) => {\r\n\r\n        return Array.from(ingredientItems)\r\n            .map((v: (IDataItem)) => { return v!.price })\r\n            .reduce((previousValue, currentValue) => previousValue + currentValue, 0);\r\n    }), 0);\r\n\r\n    useEffect(() => {\r\n\r\n        dispatchTotal();\r\n\r\n    }, [selectedIngredientsId]);\r\n\r\n    const removeIngredientHandler = (id: string) => {\r\n\r\n        dispatchTotal();\r\n\r\n        props.removeIngredient(id);\r\n\r\n    };\r\n\r\n    const checkout = () => {\r\n\r\n        dispatch({\r\n            type: SET_ORDER_STATUS,\r\n            status: \"IN_PROGRESS\"\r\n        });\r\n\r\n        // setTimeout(function () {\r\n        //     dispatch({\r\n        //         type: SET_ORDER_STATUS,\r\n        //         status: null\r\n        //     });\r\n        // }, 1000 * 15);\r\n\r\n        const orderData: TOrderInfo = {\r\n            orderNumber: null,//Math.floor(Math.random() * 999999)\r\n            selectedIngredientsId: selectedIngredientsId,\r\n            total: total\r\n        }\r\n\r\n        props.completeCheckout(orderData);\r\n    }\r\n\r\n    const moveItem = (from: string, to: string, indexFrom: number, indexTo: number) => {\r\n\r\n        let tempArray = ingredientList.map<string>((v) => v?._id);\r\n\r\n        //console.log(tempArray);\r\n\r\n        //let fromIndex = tempArray.findIndex((v: string) => { return v === from });\r\n        //let toIndex = tempArray.findIndex((v: string) => { return v === to });\r\n\r\n        let fromIndex = tempArray.findIndex((v, i: number) => { return i === indexFrom });\r\n        let toIndex = tempArray.findIndex((v, i: number) => { return i === indexTo });\r\n\r\n        let temp = tempArray[toIndex];\r\n        tempArray[toIndex] = tempArray[fromIndex];\r\n        tempArray[fromIndex] = temp;\r\n\r\n        //console.log(tempArray);\r\n\r\n        tempArray = tempArray.concat(bunList.map((v) => v?._id));\r\n        tempArray = tempArray.concat(bunList.map((v) => v?._id));\r\n\r\n        dispatch({\r\n            type: SET_SELECTED_INGREDIENTS,\r\n            selectedIngredientsId: tempArray\r\n        });\r\n    }\r\n\r\n    const [{ isHover }, dropTarget] = useDrop({\r\n        accept: 'add-ingredient',\r\n        collect: (monitor: DropTargetMonitor) => ({\r\n            isHover: monitor.isOver()\r\n        }),\r\n        drop(item: { id: string }) {\r\n\r\n            props.addIngredient(item.id)\r\n        },\r\n    });\r\n\r\n    return (\r\n        <div className={styles['burger-constructor'] + ' pt-10 mt-15 pb-10 pl-4'} ref={dropTarget} style={{ outline: `2px dashed ${isHover ? '#4c4cff' : 'transparent'}`, }}>\r\n\r\n            <ul className={styles['top'] + \" pr-4\"}>\r\n                {bunList.map((item: IDataItem, i) => (\r\n                    <li key={`${item._id}_${i}`}>\r\n                        {bunList.length > 1 ? <DragIcon type=\"primary\" /> : null}\r\n                        <ConstructorElement\r\n                            type=\"top\"\r\n                            isLocked={bunList.length === 1}\r\n                            text={item.name + ' (верх)'}\r\n                            price={item.price}\r\n                            thumbnail={item.image}\r\n                            handleClose={() => removeIngredientHandler(item._id)}\r\n                        />\r\n                    </li>\r\n                ))}\r\n\r\n                {bunList.length === 0 ?\r\n                    <li className=\"text text_type_main-default\" style={{ justifyContent: 'center' }}>\r\n                        Обязательно попробуйте наши булки\r\n                    </li>\r\n                    : null}\r\n\r\n            </ul>\r\n\r\n            <ul className={stylesScrollable.scrollable + \" pr-2 pt-4 pb-4\"}>\r\n\r\n                {ingredientList.map((item: IDataItem, i: number) => (\r\n\r\n                    <li key={`${item._id}_${i}`} data-index={i}>\r\n\r\n                        <DraggableElement id={item._id} index={i} onMoveItem={moveItem}>\r\n\r\n                            <DragIcon type=\"primary\" />\r\n\r\n                            <ConstructorElement\r\n                                isLocked={false}\r\n                                text={item.name}\r\n                                price={item.price}\r\n                                thumbnail={item.image}\r\n                                handleClose={() => removeIngredientHandler(item._id)}\r\n                            />\r\n                        </DraggableElement>\r\n\r\n                    </li>\r\n\r\n                ))}\r\n\r\n                {ingredientList.length === 0 ?\r\n                    <li className=\"text text_type_main-default\" style={{ justifyContent: 'center' }}>\r\n                        Вы можете выбрать начинку или соус\r\n                    </li>\r\n                    : null}\r\n\r\n            </ul>\r\n\r\n            <ul className={styles.bottom + \" pr-4\"}>\r\n                {bunList.map((item: IDataItem, i) => (\r\n                    <li key={`${item._id}_${i}`}>\r\n                        {bunList.length > 1 ? <DragIcon type=\"primary\" /> : null}\r\n                        <ConstructorElement\r\n                            type=\"bottom\"\r\n                            isLocked={bunList.length === 1}\r\n                            text={item.name + ' (низ)'}\r\n                            price={item.price}\r\n                            thumbnail={item.image}\r\n                            handleClose={() => removeIngredientHandler(item._id)}\r\n                        />\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n\r\n            {bunList.length !== 0 ?\r\n                <div className={styles[\"checkout-block\"] + \" mt-10 pr-4\"}>\r\n                    <div className={styles.total}>\r\n                        <span className=\"text text_type_digits-medium\">\r\n                            {total}\r\n                        </span>\r\n                    </div>\r\n                    <div className={styles[\"currency-icon-wrapper\"] + \" ml-2\"}>\r\n                        <CurrencyIcon type=\"primary\" onClick={undefined} />\r\n                    </div>\r\n\r\n                    {orderStatus === \"ERROR\" ?\r\n                        <>\r\n                            <div className=\"text text_type_main-default ml-4\">\r\n                                Невозможно выполнить заказ\r\n                            </div>\r\n                            <div className={styles[\"button-wrapper\"] + \" ml-10\"}>\r\n                                <Button type=\"primary\" size=\"large\" onClick={checkout}>\r\n                                    Попробовать снова\r\n                                </Button>\r\n                            </div>\r\n                        </>\r\n                        : null}\r\n\r\n                    {orderStatus === \"IN_PROGRESS\" ?\r\n                        <div className=\"text text_type_main-default ml-4\">\r\n                            Дождитесь оформления заказа\r\n                        </div>\r\n                        : null}\r\n\r\n                    {orderStatus === null ?\r\n                        <div className={styles[\"button-wrapper\"] + \" ml-10\"}>\r\n                            <Button type=\"primary\" size=\"large\" onClick={checkout}>\r\n                                Оформить заказ\r\n                            </Button>\r\n                        </div>\r\n                        : null}\r\n\r\n                </div>\r\n                : null}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BurgerConstructor;","import styles from './IngredientDetails.module.css';\r\n\r\n// import PropTypes from 'prop-types';\r\nimport IDataItem from '../../utils/Interfaces/IDataItem';\r\n\r\nfunction IngredientDetails(props: { element: IDataItem, style: React.CSSProperties | undefined }) {\r\n\r\n    if (!props.element) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className={styles[\"ingredient-info\"]} style={props.style}>\r\n            <div className={styles[\"icon-wrapper\"] + \" mb-4\"}>\r\n                <img src={props.element.image_large} alt=\"icon-wrapper-img\" />\r\n            </div>\r\n            <div className={styles.title + \" text text_type_main-medium mt-4 mb-8\"}>\r\n                {props.element.name}\r\n            </div>\r\n            <ul className={styles[\"composition-list\"] + \" text_color_inactive\"}>\r\n                <li className={styles[\"composition-item\"]}>\r\n                    <div className={styles.title + \" text text_type_main-medium\"}>\r\n                        Калории, ккал\r\n                    </div>\r\n                    <div className={styles.value + \" text text_type_digits-default mt-2\"}>\r\n                        {props.element.calories}\r\n                    </div>\r\n                </li>\r\n                <li className={styles[\"composition-item\"]}>\r\n                    <div className={styles.title + \" text text_type_main-medium\"}>\r\n                        Белки, г\r\n                    </div>\r\n                    <div className={styles.value + \" text text_type_digits-default mt-2\"}>\r\n                        {props.element.proteins}\r\n                    </div>\r\n                </li>\r\n                <li className={styles[\"composition-item\"]}>\r\n                    <div className={styles.title + \" text text_type_main-medium\"}>\r\n                        Жиры, г\r\n                    </div>\r\n                    <div className={styles.value + \" text text_type_digits-default mt-2\"}>\r\n                        {props.element.fat}\r\n                    </div>\r\n                </li>\r\n                <li className={styles[\"composition-item\"]}>\r\n                    <div className={styles.title + \" text text_type_main-medium\"}>\r\n                        Углеводы, г\r\n                    </div>\r\n                    <div className={styles.value + \" text text_type_digits-default mt-2\"}>\r\n                        {props.element.carbohydrates}\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\n// IngredientDetails.propTypes = {\r\n//     element: PropTypes.shape({\r\n//         _id: PropTypes.string,\r\n//         name: PropTypes.string,\r\n//         type: PropTypes.string,\r\n//         proteins: PropTypes.number,\r\n//         fat: PropTypes.number,\r\n//         carbohydrates: PropTypes.number,\r\n//         calories: PropTypes.number,\r\n//         price: PropTypes.number,\r\n//         image: PropTypes.string,\r\n//         image_mobile: PropTypes.string,\r\n//         image_large: PropTypes.string,\r\n//         __v: PropTypes.number\r\n//     }),\r\n// };\r\n\r\nexport default IngredientDetails;","import React from 'react';\r\n\r\nimport styles from './ModalOverlay.module.css';\r\n\r\n// import PropTypes from 'prop-types';\r\n\r\nfunction ModalOverlay(props: any) {\r\n\r\n    return (\r\n        <div className={styles[\"modal-background\"]} onClick={props.onClick}>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\n// ModalOverlay.propTypes = {\r\n//     children: PropTypes.oneOfType([\r\n//         PropTypes.arrayOf(PropTypes.node),\r\n//         PropTypes.node\r\n//     ]).isRequired,\r\n//     onClick: PropTypes.func,\r\n// };\r\n\r\nexport default ModalOverlay;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport ModalOverlay from '../ModalOverlay/ModalOverlay';\r\n\r\nimport {\r\n    CloseIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './Modal.module.css';\r\n\r\n// import PropTypes from 'prop-types';\r\n\r\nclass Modal extends React.Component<{ onCloseModalCallback: Function, title: string | null }, { enable: boolean }> {\r\n\r\n    // static propTypes = {\r\n    //     onCloseModalCallback: PropTypes.func,\r\n    //     title: PropTypes.string\r\n    // };\r\n\r\n    constructor(props: any) {\r\n\r\n        super(props);\r\n\r\n        this.state = {\r\n            enable: true,\r\n        };\r\n\r\n        this.closeModal = this.closeModal.bind(this);\r\n    }\r\n\r\n    closeModal = (e: any) => {\r\n\r\n        e.stopPropagation();\r\n\r\n        if (e.code === 'Escape' || e.currentTarget.className === e.target.className || `${e.currentTarget.className}`.includes(styles['close-icon-wrapper'])) {\r\n            this.props.onCloseModalCallback();\r\n            this.setState({ ...this.state, enable: false });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener(\"keydown\", this.closeModal);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener(\"keydown\", this.closeModal);\r\n    }\r\n\r\n    render() {\r\n\r\n        return ReactDOM.createPortal(\r\n            this.state.enable ?\r\n                <ModalOverlay onClick={this.closeModal}>\r\n                    <div className={`${styles[\"modal-body\"]} pt-10 pl-10 pr-10 pb-15`}>\r\n                        <div className={styles[\"modal-header\"]}>\r\n                            <span className={styles['modal-title'] + \" text text_type_main-large\"}>\r\n                                {this.props.title}\r\n                            </span>\r\n                            <div className={styles[\"close-icon-wrapper\"]} onClick={this.closeModal}>\r\n                                <CloseIcon type=\"primary\" />\r\n                            </div>\r\n                        </div>\r\n                        {this.props.children}\r\n                    </div>\r\n                </ModalOverlay>\r\n                : null\r\n            ,\r\n            document.getElementById(\"for-modal\") as Element\r\n        )\r\n    }\r\n\r\n};\r\n\r\nexport default Modal;","export default __webpack_public_path__ + \"static/media/done.dc2f52b0.png\";","import React from 'react';\r\n\r\nimport styles from './OrderDetails.module.css';\r\n\r\nimport orderAccpeted from '../../images/order accpeted/popup/done.png';\r\n\r\n// import PropTypes from 'prop-types';\r\nimport { TOrderInfo } from '../../utils/Interfaces/IBasicState';\r\n\r\nclass OrderDetails extends React.Component<{ orderInfo: TOrderInfo }, {}> {\r\n\r\n    // static propTypes = {\r\n    //     orderInfo: PropTypes.shape({\r\n    //         orderNumber: PropTypes.number,\r\n    //         selectedIngredientsId: PropTypes.arrayOf(PropTypes.string),\r\n    //         total: PropTypes.number,\r\n    //     }),\r\n    // };\r\n\r\n    render() {\r\n\r\n        let orderNumber = this.props.orderInfo?.orderNumber;\r\n\r\n        return (\r\n            <div className={styles[\"checkout-info\"]}>\r\n                <div className={styles[\"checkout-number\"] + \"text text_type_digits-large\"}>\r\n                    {orderNumber}\r\n                </div>\r\n                <div className={styles[\"checkout-title\"] + \" text text_type_main-medium mt-8\"}>\r\n                    Идентификатор заказа\r\n                </div>\r\n                <div className={styles[\"checkout-icon-wrapper\"] + \" mt-15 mb-15\"}>\r\n                    <img src={orderAccpeted} alt=\"\" />\r\n                </div>\r\n                <div className={styles[\"checkout-status\"] + \" text text_type_main-medium mb-2\"}>\r\n                    Ваш заказ начали готовить\r\n                </div>\r\n                <div className={styles[\"checkout-text\"] + \" text text_type_main-medium text_color_inactive mb-15\"}>\r\n                    Дождитесь готовности на орбитальной станции\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default OrderDetails;","import React from 'react';\r\n\r\nimport BurgerIngredients from '../BurgerIngredients/BurgerIngredients';\r\nimport BurgerConstructor from '../BurgerConstructor/BurgerConstructor';\r\nimport IngredientDetails from '../IngredientDetails/IngredientDetails';\r\n\r\n//import json from '../../utils/data.json';\r\n\r\nimport { actionInitData, actionSetOrderInfo, SET_SELECTED_INGREDIENTS, SET_ID_FOR_POPUP, DELETE_ID_FOR_POPUP, SET_ORDER_DATA } from '../../services/actions/basic';\r\n\r\nimport IDataItem from '../../utils/Interfaces/IDataItem';\r\n\r\nimport Modal from '../Modal/Modal';\r\n\r\nimport OrderDetails from '../OrderDetails/OrderDetails';\r\n\r\n//import { BurgerConstructorContext } from '../../services/BurgerConstructorContext';\r\n\r\nimport { useEffect } from 'react';\r\n\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { useAuth } from '../../services/auth';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { TOrderInfo } from '../../utils/Interfaces/IBasicState';\r\nimport { LocationExtention } from '../../utils/types';\r\nimport { useAppDispatch, useAppSelector } from '../../utils/hooks';\r\n\r\n//const DATA_URL = 'https://norma.nomoreparties.space/api/ingredients';\r\n//const DATA_URL_CHECKOUT = 'https://norma.nomoreparties.space/api/orders';\r\n\r\nexport function HomePage() {\r\n\r\n  const auth = useAuth();\r\n  const history = useHistory();\r\n  const location = useLocation<LocationExtention>();\r\n\r\n  const { data, selectedIngredientsId, orderInfo, idForPopup } = useAppSelector(state => state.basic);\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [state] = React.useState<{\r\n    quantityData: {\r\n      id: string,\r\n      quantity: number\r\n    }[],\r\n  }>({\r\n    quantityData: Array.from([]).map((v: IDataItem) => {\r\n      return {\r\n        id: v._id,\r\n        quantity: Math.floor(Math.random() * 10)\r\n      };\r\n    }),\r\n  });\r\n\r\n  useEffect(() => {\r\n\r\n    dispatch(actionInitData());\r\n\r\n  }, [dispatch]);\r\n\r\n  const openPopup = (id: string) => {\r\n\r\n    // if (history.location.pathname === '/') {\r\n\r\n    //   setIdForPopup(id);\r\n    //   window.history.replaceState(null, `id:${id}`, `/ingredients/${id}`);\r\n\r\n    // } else {\r\n\r\n    //   history.replace({ pathname: `/ingredients/${id}`, state: {from: history.location} });\r\n    // }\r\n\r\n    history.replace({ pathname: `/ingredients/${id}`, state: { from: history.location } });\r\n  }\r\n\r\n  const clearIdForPopup = () => {\r\n    dispatch({\r\n      type: DELETE_ID_FOR_POPUP,\r\n    });\r\n\r\n    history.replace({ pathname: `/`, state: { from: history.location } });\r\n\r\n    //window.history.replaceState(null, `react-burger`, `/`)\r\n  }\r\n\r\n  const addIngredient = (id: string) => {\r\n\r\n    let newSelectedIngredientsId = Array.from(selectedIngredientsId);\r\n\r\n    if (data.find((v: IDataItem) => v._id === id)?.type === 'bun') {\r\n\r\n      newSelectedIngredientsId = newSelectedIngredientsId.filter((v, i, a) => {\r\n        return data.find((x: IDataItem) => x._id === v)?.type !== 'bun';\r\n      });\r\n\r\n      newSelectedIngredientsId.push(id);\r\n      newSelectedIngredientsId.push(id);\r\n\r\n    } else {\r\n      newSelectedIngredientsId.push(id);\r\n    }\r\n\r\n    dispatch({\r\n      type: SET_SELECTED_INGREDIENTS,\r\n      selectedIngredientsId: newSelectedIngredientsId\r\n    });\r\n\r\n  };\r\n\r\n  const removeIngredient = (id: string) => {\r\n\r\n    const newSelectedIngredientsId = selectedIngredientsId;\r\n    const index = selectedIngredientsId.indexOf(id);\r\n    newSelectedIngredientsId.splice(index, 1);\r\n\r\n    dispatch({\r\n      type: SET_SELECTED_INGREDIENTS,\r\n      selectedIngredientsId: newSelectedIngredientsId\r\n    });\r\n\r\n  };\r\n\r\n  const setIdForPopup = (id: string) => {\r\n    dispatch({\r\n      type: SET_ID_FOR_POPUP,\r\n      idForPopup: id\r\n    });\r\n  };\r\n\r\n  const getIngredientById = (id: string) => {\r\n    return data.find((v: IDataItem) => { return v._id === id });\r\n  }\r\n\r\n  const setOrderInfo = (orderData: TOrderInfo) => {\r\n\r\n    if (!auth.isHasCookie()) {\r\n\r\n      history.replace({ pathname: '/login', state: { from: location } });\r\n\r\n    } else {\r\n      dispatch(actionSetOrderInfo(orderData));\r\n    }\r\n\r\n  }\r\n\r\n  const clearOrderInfo = () => {\r\n\r\n    dispatch({\r\n      type: SET_ORDER_DATA,\r\n      orderInfo: null\r\n    });\r\n\r\n    let defaultIngredients = Array.from<IDataItem>([]);\r\n\r\n    //// demo\r\n    // let defaultBunIngredientId = data.filter((v: IDataItem) => { return v.type === 'bun' })[0]._id;\r\n\r\n    // defaultIngredients.push(defaultBunIngredientId);\r\n    // defaultIngredients.push(defaultBunIngredientId);\r\n\r\n    dispatch({\r\n      type: SET_SELECTED_INGREDIENTS,\r\n      selectedIngredientsId: defaultIngredients\r\n    });\r\n\r\n  }\r\n\r\n  const mainWrapperStyle = {\r\n    display: 'flex',\r\n    gap: 'calc(var(--offset-base-size) * 10)',\r\n    justifyContent: 'space-evenly',\r\n\r\n    width: 'calc(var(--offset-base-size) * 320)',\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto'\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className=\"main\">\r\n        <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n          <DndProvider backend={HTML5Backend}>\r\n\r\n            {Array.from(data).length > 0\r\n              ? <BurgerIngredients\r\n                setIdForPopup={setIdForPopup}\r\n                quantityData={state.quantityData}\r\n                onClickOnIngredient={openPopup}\r\n              ></BurgerIngredients>\r\n              : null}\r\n\r\n            {Array.from(data).length > 0\r\n              ? <BurgerConstructor\r\n                completeCheckout={setOrderInfo}\r\n                removeIngredient={removeIngredient}\r\n                addIngredient={addIngredient}\r\n              ></BurgerConstructor>\r\n              : null}\r\n\r\n          </DndProvider>\r\n\r\n        </div>\r\n      </section>\r\n\r\n      {orderInfo &&\r\n        <Modal title={null} onCloseModalCallback={clearOrderInfo}>\r\n          <OrderDetails orderInfo={orderInfo as TOrderInfo}></OrderDetails>\r\n        </Modal>\r\n      }\r\n\r\n      {idForPopup &&\r\n        <Modal title={'Детали ингредиента'} onCloseModalCallback={clearIdForPopup}>\r\n          <IngredientDetails style={undefined} element={getIngredientById(idForPopup) as IDataItem}></IngredientDetails>\r\n        </Modal>\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\n","import { Input, EmailInput, PasswordInput, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { SyntheticEvent } from \"react\";\r\nimport styles from './Registration.module.css';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useAuth } from \"../../../services/auth\";\r\nimport { Redirect } from \"react-router\";\r\nimport { signUp } from \"../../../services/actions/auth\";\r\nimport { useAppDispatch } from \"../../../utils/hooks\";\r\n\r\nfunction Registration() {\r\n\r\n    const auth = useAuth();\r\n    const dispatch = useAppDispatch();\r\n\r\n    const [name, setName] = React.useState('')\r\n    const inputNameRef = React.useRef(null)\r\n\r\n    const [email, setEmail] = React.useState('')\r\n    const onEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setEmail(e.target.value)\r\n    }\r\n\r\n    const [password, setPassword] = React.useState('')\r\n    const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setPassword(e.target.value)\r\n    }\r\n\r\n    const history = useHistory();\r\n    const { state } = useLocation();\r\n\r\n    const onLoginHandler = () => {\r\n        history.replace({ pathname: '/login', state });\r\n    }\r\n\r\n    const onRegistrationHandler = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        dispatch(signUp({ name, password, email }));\r\n    }\r\n\r\n    if (auth.isHasCookie()) {\r\n        return (\r\n            <Redirect\r\n                to={{\r\n                    pathname: '/'\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <section style={{}} className={styles.registration + \" \"}>\r\n\r\n            <div className={styles.title + \" text text_type_main-default\"}>\r\n                Регистрация\r\n            </div>\r\n\r\n            <form className={styles.form + \" pt-5 pb-20\"} onSubmit={(e) => { onRegistrationHandler(e) }}>\r\n\r\n                <Input\r\n                    type={'text'}\r\n                    placeholder={'Имя'}\r\n                    onChange={e => setName(e.target.value)}\r\n                    value={name}\r\n                    name={'name'}\r\n                    error={false}\r\n                    ref={inputNameRef}\r\n                    errorText={'Ошибка'}\r\n                    size={'default'}\r\n                />\r\n\r\n                <EmailInput onChange={onEmailChange} value={email} name={'E-mail'} />\r\n\r\n                <PasswordInput onChange={onPasswordChange} value={password} name={'Пароль'} />\r\n\r\n                <Button type=\"primary\" size=\"medium\">\r\n                    Зарегистрироваться\r\n                </Button>\r\n\r\n            </form>\r\n\r\n            <div style={{ textAlign: \"center\" }} className={styles[\"title-bottom\"] + \"p-5 text text_type_main-default\"}>\r\n                Уже зарегистрированы?\r\n                <Button type=\"secondary\" size=\"medium\" onClick={onLoginHandler}>\r\n                    Войти\r\n                </Button>\r\n            </div>\r\n\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Registration;\r\n","import Registration from \"../Authentication/Registration/Registration\";\r\n\r\nexport function RegistrationPage() {\r\n\r\n    const mainWrapperStyle = {\r\n        display: 'flex',\r\n        gap: 'calc(var(--offset-base-size) * 10)',\r\n        justifyContent: 'space-evenly',\r\n\r\n        width: 'calc(var(--offset-base-size) * 320)',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto'\r\n    };\r\n\r\n    return (\r\n        <section className=\"main\">\r\n            <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n                <Registration></Registration>\r\n\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n","import { IWsOrder } from \"../reducers/wsReducer\";\r\n\r\nexport const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\r\n\r\nexport const WS_FEED_CONNECTION_START: 'WS_FEED_CONNECTION_START' = 'WS_FEED_CONNECTION_START';\r\nexport const WS_FEED_CONNECTION_SUCCESS: 'WS_FEED_CONNECTION_SUCCESS' = 'WS_FEED_CONNECTION_SUCCESS';\r\nexport const WS_FEED_CONNECTION_ERROR: 'WS_FEED_CONNECTION_ERROR' = 'WS_FEED_CONNECTION_ERROR';\r\nexport const WS_FEED_CONNECTION_CLOSED: 'WS_FEED_CONNECTION_CLOSED' = 'WS_FEED_CONNECTION_CLOSED';\r\nexport const WS_FEED_GET_MESSAGE: 'WS_FEED_GET_MESSAGE' = 'WS_FEED_GET_MESSAGE';\r\nexport const WS_FEED_SEND_MESSAGE: 'WS_FEED_SEND_MESSAGE' = 'WS_FEED_SEND_MESSAGE';\r\n\r\nexport interface IWsConnectionStart {\r\n    readonly type: typeof WS_CONNECTION_START;\r\n    readonly wsConnected: boolean;\r\n}\r\n\r\nexport interface IWsConnectionSuccess {\r\n    readonly type: typeof WS_CONNECTION_SUCCESS;\r\n    readonly wsConnected: boolean;\r\n}\r\n\r\nexport interface IWsConnectionError {\r\n    readonly type: typeof WS_CONNECTION_ERROR;\r\n    readonly wsConnected: boolean;\r\n}\r\n\r\nexport interface IWsConnectionClosed {\r\n    readonly type: typeof WS_CONNECTION_CLOSED;\r\n    readonly wsConnected: boolean;\r\n}\r\n\r\nexport interface IWsGetMessage {\r\n    readonly type: typeof WS_GET_MESSAGE;\r\n    readonly payload: { total: number, totalToday: number, orders: IWsOrder[] };\r\n}\r\n\r\nexport type TWsConnectionDispatchType = | IWsConnectionStart | IWsConnectionSuccess | IWsConnectionError | IWsConnectionClosed | IWsGetMessage;\r\n\r\nexport interface IWsFeedConnectionStart {\r\n    readonly type: typeof WS_FEED_CONNECTION_START;\r\n    readonly wsConnected: boolean;\r\n}\r\n\r\nexport interface IWsFeedConnectionSuccess {\r\n    readonly type: typeof WS_FEED_CONNECTION_SUCCESS;\r\n    readonly wsConnected: boolean;\r\n}\r\n\r\nexport interface IWsFeedConnectionError {\r\n    readonly type: typeof WS_FEED_CONNECTION_ERROR;\r\n    readonly wsConnected: boolean;\r\n}\r\n\r\nexport interface IWsFeedConnectionClosed {\r\n    readonly type: typeof WS_FEED_CONNECTION_CLOSED;\r\n    readonly wsConnected: boolean;\r\n}\r\n\r\nexport interface IWsFeedGetMessage {\r\n    readonly type: typeof WS_FEED_GET_MESSAGE;\r\n    readonly payload: { total: number, totalToday: number, orders: Array<IWsOrder> };\r\n}\r\n\r\nexport type TWsFeedConnectionDispatchType = | IWsFeedConnectionStart | IWsFeedConnectionSuccess | IWsFeedConnectionError | IWsFeedConnectionClosed | IWsFeedGetMessage;\r\n","import { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { getDateTimeInSpecialFormat } from '../../services/utils';\r\nimport IDataItem from '../../utils/Interfaces/IDataItem';\r\nimport styles from './ProfileOrdersListItem.module.css';\r\n\r\nfunction ProfileOrdersListItem(props: { item: any, isShowStatus: boolean, data: IDataItem[] }) {\r\n\r\n    const getIngredientById = (id: string) => {\r\n        return props.data.find((v: IDataItem) => { return v._id === id })\r\n    }\r\n\r\n    const total = Array.from<string>(props?.item?.ingredients)\r\n        .map((id: string) => { return getIngredientById(id)?.price || 0 })\r\n        .reduce((previousValue: any, currentValue: any) => previousValue + currentValue, 0);\r\n\r\n    const getDateTime = getDateTimeInSpecialFormat;\r\n\r\n    const getStatus = (status: string) => {\r\n        if (status === 'done') {\r\n            return \"Выполнен\";\r\n        } else if (status === 'created' ) {\r\n            return \"Создан\";\r\n        } else if (status === 'pending' ) {\r\n            return \"Готовится\";\r\n        } else {\r\n            return status;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={styles[\"profile-order-item\"] + \" p-6 mb-5\"}>\r\n\r\n            <div className={styles.number + \" text text_type_digits-medium mb-6\"}>\r\n                #{props.item.number}\r\n            </div>\r\n\r\n            <div className={styles.time + \" text text_type_main-medium text_color_inactive\"}>\r\n                {getDateTime(props.item.createdAt)}\r\n            </div>\r\n\r\n            <div className={styles.name + \" text text_type_main-medium mb-2\"}>\r\n                {props.item.name}\r\n            </div>\r\n            \r\n            {props.isShowStatus ?\r\n                <div className={styles.status + \" text text_type_main-medium\"}>\r\n                    {getStatus(props.item.status)}\r\n                </div>\r\n                : null}\r\n            \r\n            <div className={styles[\"panel-bottom\"] + \" mt-6\"}>\r\n                <ul className={styles[\"image-list\"]}>\r\n\r\n                    {props.data && Array.from(props.item.ingredients).filter((v, i: number) => i < 5).map((itemId: any, i: number) => {\r\n\r\n                        const ingredient = getIngredientById(itemId);\r\n\r\n                        return (\r\n                            <li key={`${itemId}_${i}`}>\r\n                                <div className={styles[\"image-item\"]} style={{ zIndex: 1000 - i }}>\r\n                                    <img src={ingredient?.image} alt={`${ingredient?.image}`} />\r\n                                </div>\r\n                            </li>\r\n                        );\r\n\r\n                    })}\r\n\r\n                    {props.item.ingredients[5] !== undefined ?\r\n                        <li key={`other`}>\r\n                            <div className={styles[\"image-item\"]}>\r\n                                <span className={styles[\"offset-count\"] + \" text text_type_main-medium\"}>\r\n                                    {`+${props.item.ingredients.length - 5}`}\r\n                                </span>\r\n                                <img style={{ opacity: '0.5' }} src={getIngredientById(props.item.ingredients[5])?.image} alt=\"\" />\r\n                            </div>\r\n                        </li>\r\n                        : null}\r\n\r\n                </ul>\r\n\r\n                <div className={styles.total + \" text text_type_digits-medium\"}>\r\n                    <CurrencyIcon type=\"primary\" onClick={undefined} />\r\n                    <span>{total}</span>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProfileOrdersListItem;","import ProfileOrdersListItem from \"../ProfileOrdersListItem/ProfileOrdersListItem\";\r\nimport stylesScrollable from '../../css/scrollable.module.css';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport { actionInitData } from \"../../services/actions/basic\";\r\nimport { IWsOrder } from \"../../services/reducers/wsReducer\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\nfunction ProfileOrders() {\r\n\r\n    const { data } = useAppSelector(state => state.basic);\r\n\r\n    const profileOrders = useAppSelector(state => state.profileOrders);\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch(actionInitData());\r\n\r\n        return () => {\r\n\r\n        }\r\n\r\n    }, [dispatch]);\r\n    \r\n    const history = useHistory();\r\n\r\n    const onClickProfileOrderItem = (item: IWsOrder) => {\r\n        history.replace({ pathname: `/profile/orders/${item.number}`, state: { from: history.location, number: item.number } });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ul className={`profile-order-list ${stylesScrollable.scrollable} pr-2`} style={{ maxHeight: \"60vh\" }}>\r\n\r\n                {Array.from(profileOrders.orders).map((item: IWsOrder) => {\r\n\r\n                    return (\r\n                        <li\r\n                            key={item._id}\r\n                            className={\"\"}\r\n                            onClick={() => onClickProfileOrderItem(item)}\r\n                            style={{ cursor: \"pointer\" }}\r\n                        >\r\n                            <ProfileOrdersListItem item={item} data={data} isShowStatus={true} />\r\n\r\n                        </li>\r\n                    )\r\n                })}\r\n\r\n            </ul>\r\n\r\n            {profileOrders && profileOrders.orders.length === 0 ?\r\n                <div className={\"text text_type_main-default\"} style={{ textAlign: 'center' }}>\r\n                    У Вас ещё нет заказов\r\n                </div>\r\n                : null}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ProfileOrders;","import { useHistory, useLocation } from 'react-router-dom';\r\nimport { useAuth } from './../../services/auth';\r\nimport React, { useEffect } from \"react\";\r\nimport { Input, EmailInput, PasswordInput, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from './Profile.module.css';\r\nimport { updateUser, signOut } from '../../services/actions/auth';\r\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_START } from '../../services/actions/wsActionTypes';\r\nimport ProfileOrders from '../ProfileOrders/ProfileOrders';\r\nimport { useAppDispatch } from '../../utils/hooks';\r\n\r\nfunction Profile() {\r\n\r\n    const { pathname, state } = useLocation();\r\n    const auth = useAuth();\r\n    const dispatch = useAppDispatch();\r\n\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch({ type: WS_CONNECTION_START });\r\n\r\n        return () => {\r\n\r\n            dispatch({ type: WS_CONNECTION_CLOSED });\r\n\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const onProfileClickHandler = () => {\r\n        history.replace({ pathname: '/profile', state });\r\n    }\r\n\r\n    const onOrdersClickHandler = () => {\r\n        history.replace({ pathname: '/profile/orders', state });\r\n    }\r\n\r\n    const onLogoutClickHandler = () => {\r\n        dispatch(signOut());\r\n        history.replace({ pathname: '/login', state });\r\n    }\r\n\r\n    const [name, setName] = React.useState(auth.user?.name || '')\r\n    const inputNameRef = React.useRef(null)\r\n\r\n    const [email, setEmail] = React.useState(auth.user?.email || '')\r\n    const onEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setEmail(e.target.value)\r\n    }\r\n\r\n    const [password, setPassword] = React.useState('')\r\n\r\n    const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setPassword(e.target.value)\r\n    }\r\n\r\n    const onSaveHandler = () => {\r\n        dispatch(updateUser({ name, email, password }));\r\n    }\r\n\r\n    const onCancelHandler = () => {\r\n        history.go(0);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <section className={`${styles.profile}`}>\r\n\r\n                <div className={`${styles['left-aside']}`}>\r\n                    <div\r\n                        className={`${styles.link} text text_type_main-medium ${pathname !== '/profile' ? 'text_color_inactive' : null}`}\r\n                        onClick={onProfileClickHandler}\r\n                    >\r\n                        Профиль\r\n                    </div>\r\n                    <div\r\n                        className={`${styles.link} text text_type_main-medium ${pathname !== '/profile/orders' ? 'text_color_inactive' : null}`}\r\n                        onClick={onOrdersClickHandler}\r\n                    >\r\n                        История заказов\r\n                    </div>\r\n                    <div\r\n                        className={`${styles.link} text text_type_main-medium text_color_inactive`}\r\n                        onClick={onLogoutClickHandler}\r\n                    >\r\n                        Выход\r\n                    </div>\r\n                    <div className=\"text text_type_main-default text_color_inactive mt-20\">\r\n                        В этом разделе вы можете изменить свои персональные данные\r\n                    </div>\r\n                </div>\r\n\r\n                {pathname === '/profile' ?\r\n                    <>\r\n                        <div className={`${styles['right-aside']}`} style={{ alignItems: 'center', width: '60%' }}>\r\n\r\n                            <Input\r\n                                type={'text'}\r\n                                placeholder={'Имя'}\r\n                                onChange={e => setName(e.target.value)}\r\n                                value={name}\r\n                                name={'name'}\r\n                                error={false}\r\n                                ref={inputNameRef}\r\n                                errorText={'Ошибка'}\r\n                                size={'default'}\r\n                            />\r\n\r\n                            <EmailInput onChange={onEmailChange} value={email} name={'Логин'} />\r\n\r\n                            <PasswordInput onChange={onPasswordChange} value={password} name={'Пароль'} />\r\n\r\n                            {email !== '' && name !== '' && password !== '' &&\r\n                                <>\r\n                                    <Button type=\"primary\" size=\"medium\" onClick={onSaveHandler}>\r\n                                        Сохранить\r\n                                    </Button>\r\n                                    <Button type=\"primary\" size=\"medium\" onClick={onCancelHandler}>\r\n                                        Отменить\r\n                                    </Button>\r\n                                </>\r\n                            }\r\n\r\n                        </div>\r\n                        <div style={{ width: '40%' }}></div>\r\n                    </>\r\n                    : null}\r\n\r\n                {pathname === '/profile/orders' ?\r\n                    <div className={`${styles['right-aside']}`}>\r\n\r\n                        <ProfileOrders />\r\n\r\n                    </div>\r\n                    : null}\r\n\r\n            </section>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Profile;","import Profile from \"../Profile/Profile\";\r\n\r\nexport function ProfilePage() {\r\n\r\n    const mainWrapperStyle = {\r\n        display: 'flex',\r\n        gap: 'calc(var(--offset-base-size) * 10)',\r\n        justifyContent: 'space-evenly',\r\n\r\n        width: 'calc(var(--offset-base-size) * 320)',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto'\r\n    };\r\n\r\n    return (\r\n        <section className=\"main\">\r\n            <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n                <Profile />\r\n\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n","import { EmailInput, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { SyntheticEvent } from \"react\";\r\nimport styles from './ForgotPassword.module.css';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useAuth } from \"../../../services/auth\";\r\nimport { Redirect } from \"react-router\";\r\nimport { restorePassword } from \"../../../services/actions/auth\";\r\nimport { RootState } from \"../../../utils/types\";\r\nimport { useAppDispatch } from \"../../../utils/hooks\";\r\n\r\nfunction ForgotPassword() {\r\n\r\n    const auth = useAuth();\r\n    const dispatch = useAppDispatch();\r\n\r\n    const [email, setEmail] = React.useState('')\r\n    const onEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setEmail(e.target.value);\r\n    }\r\n\r\n    const history = useHistory();\r\n    const { state } = useLocation<RootState>();\r\n\r\n    const onLoginHandler = () => {\r\n        history.replace({ pathname: '/login', state });\r\n    }\r\n\r\n    const onRestorePasswordkHandler = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        \r\n        (dispatch(restorePassword({ email })) as any)\r\n            .then((data: { success: boolean }) => {\r\n                if (data?.success) {\r\n                    history.replace({ pathname: '/reset-password', state: { from: history.location } });\r\n                }\r\n            });\r\n    }\r\n\r\n    if (auth.isHasCookie()) {\r\n        return (\r\n            <Redirect\r\n                to={{\r\n                    pathname: '/'\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <section style={{}} className={styles[\"forgot-password\"] + \" \"}>\r\n\r\n            <div className={styles.title + \" text text_type_main-default\"}>\r\n                Восстановление пароля\r\n            </div>\r\n\r\n            <form className={styles.form + \" pt-5 pb-20\"} onSubmit={(e) => { onRestorePasswordkHandler(e) }}>\r\n\r\n                <EmailInput onChange={onEmailChange} value={email} name={'E-mail'} />\r\n\r\n                {email !== '' &&\r\n                    <Button type=\"primary\" size=\"medium\">\r\n                        Восстановить\r\n                    </Button>\r\n                }\r\n\r\n            </form>\r\n\r\n            <div style={{ textAlign: \"center\" }} className={styles[\"title-bottom\"] + \"p-5 text text_type_main-default\"}>\r\n                Вспомнили пароль?\r\n                <Button type=\"secondary\" size=\"medium\" onClick={onLoginHandler}>\r\n                    Войти\r\n                </Button>\r\n            </div>\r\n\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default ForgotPassword;\r\n","import ForgotPassword from \"../Authentication/ForgotPassword/ForgotPassword\";\r\n\r\nexport function ForgotPasswordPage() {\r\n\r\n    const mainWrapperStyle = {\r\n        display: 'flex',\r\n        gap: 'calc(var(--offset-base-size) * 10)',\r\n        justifyContent: 'space-evenly',\r\n\r\n        width: 'calc(var(--offset-base-size) * 320)',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto'\r\n    };\r\n\r\n    return (\r\n        <section className=\"main\">\r\n            <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n                <ForgotPassword></ForgotPassword>\r\n\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n","import { PasswordInput, Button, Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { SyntheticEvent } from \"react\";\r\nimport styles from './ResetPassword.module.css';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useAuth } from \"../../../services/auth\";\r\nimport { Redirect } from \"react-router\";\r\nimport { resetPassword } from \"../../../services/actions/auth\";\r\nimport { LocationExtention, RootState } from \"../../../utils/types\";\r\nimport { useAppDispatch } from \"../../../utils/hooks\";\r\n\r\nfunction ResetPassword() {\r\n\r\n    const auth = useAuth();\r\n    const dispatch = useAppDispatch();\r\n\r\n    const [token, setToken] = React.useState('')\r\n    const inputTokenRef = React.useRef(null)\r\n\r\n    const [password, setPassword] = React.useState('')\r\n    const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setPassword(e.target.value)\r\n    }\r\n\r\n    const history = useHistory();\r\n    const { state } = useLocation<RootState & LocationExtention>();\r\n\r\n    const onLoginHandler = () => {\r\n        history.replace({ pathname: '/login', state });\r\n    }\r\n\r\n    if (auth.isHasCookie()) {\r\n        return (\r\n            <Redirect\r\n                to={{\r\n                    pathname: '/'\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    if (state?.from?.pathname !== '/forgot-password') {\r\n        return (\r\n            <Redirect\r\n                to={{\r\n                    pathname: '/forgot-password'\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    const onResetClickHandler = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        (dispatch(resetPassword({ token, password })) as any)\r\n            .then((data: { success: boolean }) => {\r\n                if (data.success) {\r\n                    history.replace({ pathname: '/', state });\r\n                }\r\n            });\r\n    }\r\n\r\n    return (\r\n        <section style={{}} className={styles[\"reset-password\"] + \" \"}>\r\n\r\n            <div className={styles.title + \" text text_type_main-default\"}>\r\n                Восстановление пароля\r\n            </div>\r\n\r\n            <form className={styles.form + \" pt-5 pb-20\"} onSubmit={(e) => { onResetClickHandler(e) }}>\r\n\r\n                <PasswordInput onChange={onPasswordChange} value={password} name={'Введите новый пароль'} />\r\n\r\n                <Input\r\n                    type={'text'}\r\n                    placeholder={'Введите код из письма'}\r\n                    onChange={e => setToken(e.target.value)}\r\n                    value={token}\r\n                    name={'token'}\r\n                    error={false}\r\n                    ref={inputTokenRef}\r\n                    errorText={'Ошибка'}\r\n                    size={'default'}\r\n                />\r\n\r\n                <Button type=\"primary\" size=\"medium\">\r\n                    Восстановить\r\n                </Button>\r\n\r\n            </form>\r\n\r\n            <div style={{ textAlign: \"center\" }} className={styles[\"title-bottom\"] + \"p-5 text text_type_main-default\"}>\r\n                Вспомнили пароль?\r\n                <Button type=\"secondary\" size=\"medium\" onClick={onLoginHandler}>\r\n                    Войти\r\n                </Button>\r\n            </div>\r\n\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default ResetPassword;\r\n","import ResetPassword from \"../Authentication/ResetPassword/ResetPassword\";\r\n\r\nexport function ResetPasswordPage() {\r\n\r\n    const mainWrapperStyle = {\r\n        display: 'flex',\r\n        gap: 'calc(var(--offset-base-size) * 10)',\r\n        justifyContent: 'space-evenly',\r\n\r\n        width: 'calc(var(--offset-base-size) * 320)',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto'\r\n    };\r\n\r\n    return (\r\n        <section className=\"main\">\r\n            <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n                <ResetPassword></ResetPassword>\r\n\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n","import { useParams } from 'react-router-dom';\r\nimport IngredientDetails from \"../IngredientDetails/IngredientDetails\";\r\nimport { actionInitData } from '../../services/actions/basic';\r\nimport { useEffect } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../utils/hooks';\r\n\r\nexport function IngredientPage() {\r\n\r\n    const { id } = useParams<any>();\r\n\r\n    const { data } = useAppSelector(state => state.basic);\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch(actionInitData())\r\n\r\n    }, [dispatch]);\r\n\r\n    const getIngredientById = (id: string) => {\r\n        return data.find((v: any) => { return v._id === id });\r\n    }\r\n\r\n    const mainWrapperStyle = {\r\n        display: 'flex',\r\n        gap: 'calc(var(--offset-base-size) * 10)',\r\n        justifyContent: 'space-evenly',\r\n\r\n        width: 'calc(var(--offset-base-size) * 320)',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n\r\n        'flex-direction': 'column',\r\n        'flex-wrap': 'nowrap',\r\n        alignItems: 'center',\r\n    };\r\n\r\n    const ingredient = getIngredientById(id);\r\n\r\n    // if (!ingredient) {\r\n    //     history.replace({ pathname: '/', state });\r\n    // }\r\n\r\n    return (\r\n        <section className=\"main\">\r\n            <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n                {ingredient\r\n                    ?\r\n                    <>\r\n                        <span data-id={id} className={\" text text_type_main-large mt-10\"}>\r\n                            Детали ингредиента\r\n                        </span>\r\n                        <IngredientDetails style={{ backgroundColor: 'transparent' }} element={ingredient}></IngredientDetails>\r\n                    </>\r\n                    :\r\n                    <div>Ингредиент не найден по id: {id}</div>\r\n                }\r\n\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n","export default __webpack_public_path__ + \"static/media/loader.f0c346f6.gif\";","import loader from './../../images/loader.gif';\r\n\r\nfunction Loader() {\r\n    return (\r\n        <>\r\n            <style>{\"\\\r\n          body{\\\r\n            overflow:hidden;\\\r\n          }\\\r\n        \"}</style>\r\n\r\n            <img\r\n                style={{\r\n                    width: '100%',\r\n                    height: '100vh',\r\n                    objectFit: 'contain',\r\n                    backgroundColor: 'black',\r\n                    overflow: 'hidden'\r\n                }}\r\n                alt={'loading...'}\r\n                src={loader} />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Loader;","import { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './OrderInfo.module.css';\r\nimport stylesScrollable from '../../css/scrollable.module.css';\r\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\r\n//import { WS_CONNECTION_CLOSED, WS_CONNECTION_START, WS_FEED_CONNECTION_CLOSED, WS_FEED_CONNECTION_START } from '../../services/actions/wsActionTypes';\r\nimport { useEffect } from 'react';\r\nimport { actionGetOrder, actionInitData } from '../../services/actions/basic';\r\nimport IDataItem from '../../utils/Interfaces/IDataItem';\r\nimport { getDateTimeInSpecialFormat } from '../../services/utils';\r\nimport Loader from '../pages/Loader';\r\nimport { useState } from 'react';\r\nimport { LocationExtention } from '../../utils/types';\r\nimport { IWsOrder } from '../../services/reducers/wsReducer';\r\nimport { useAppDispatch, useAppSelector } from '../../utils/hooks';\r\n\r\nfunction OrderInfo() {\r\n\r\n    const { data } = useAppSelector(state => state.basic);\r\n    const { number } = useParams<{ number: string }>();\r\n    const dispatch = useAppDispatch();\r\n\r\n    //const feed = useSelector<any, any>(state => state.feed);\r\n    //const profileOrders = useSelector<any, any>(state => state.profileOrders);\r\n\r\n    const history = useHistory();\r\n    const location = useLocation<LocationExtention>();\r\n\r\n    const background = (location.state && (history.action === 'PUSH' || history.action === 'REPLACE') && location.state.from) || null;\r\n\r\n    const [ordersByNumber, setOrdersByNumber] = useState<any>([]);\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch(actionInitData());\r\n\r\n        (dispatch(actionGetOrder(number)) as any)\r\n            .then((orders: any) => {\r\n                setOrdersByNumber(orders);\r\n            });\r\n\r\n        //dispatch({ type: WS_FEED_CONNECTION_START });\r\n        //dispatch({ type: WS_CONNECTION_START });\r\n\r\n        return () => {\r\n\r\n            //dispatch({ type: WS_FEED_CONNECTION_CLOSED });\r\n            //dispatch({ type: WS_CONNECTION_CLOSED });\r\n        }\r\n    }, [dispatch, number]);\r\n\r\n    //const order = [...feed.orders, ...profileOrders.orders].find((v: any) => v.number === +number);\r\n    const order = Array.from<IWsOrder>(ordersByNumber).find((v: IWsOrder) => v.number === +number) as IWsOrder;\r\n\r\n    const uniqueIngredients = order?.ingredients\r\n        .filter((v: (string | undefined), i: number, a: (string | undefined)[]) => { return a.indexOf(v) === i; });\r\n\r\n    const getIngredientById = (id: string) => {\r\n        return data.find((v: IDataItem) => { return v._id === id })\r\n    }\r\n\r\n    const getCount = (id: string) => {\r\n        return order.ingredients.filter((v: string) => v === id).length;\r\n    }\r\n\r\n    const total = Array.from<string>(order?.ingredients || [])\r\n        .map((id: string) => { return getIngredientById(id)?.price || 0 })\r\n        .reduce((previousValue: number, currentValue: number) => previousValue + currentValue, 0);\r\n\r\n    const getDateTime = getDateTimeInSpecialFormat;\r\n\r\n    const getStatus = (status: string) => {\r\n        if (status === 'done') {\r\n            return \"Выполнен\";\r\n        } else if (status === 'created' ) {\r\n            return \"Создан\";\r\n        } else if (status === 'pending' ) {\r\n            return \"Готовится\";\r\n        } else {\r\n            return status;\r\n        }\r\n    };\r\n\r\n    if (!!!order || !!!data) {\r\n        return <Loader />;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <section className={styles[\"order-info\"]}>\r\n                <div className={`${background ? styles[\"into-modal\"] : null} ${styles[\"number\"]}  mb-10 text text_type_digits-medium`}>\r\n                    #{order.number}\r\n                </div>\r\n                <div className={styles[\"name\"] + \" mb-3 text text_type_main-medium\"}>\r\n                    {order.name}\r\n                </div>\r\n                <div className={`${styles[\"status\"]} ${order.status === 'done' ? styles[\"complete\"] : null} mb-15 text text_type_main-medium`}>\r\n                    {getStatus(order.status)}\r\n                </div>\r\n                <div className={styles[\"title\"] + \" mb-6 text text_type_main-medium\"}>\r\n                    Состав:\r\n                </div>\r\n\r\n                <ul className={`${styles[\"order-elements\"]} ${stylesScrollable.scrollable}`}>\r\n\r\n                    {Array.from<string>(uniqueIngredients).map((id: string) => {\r\n\r\n                        const ingredient = getIngredientById(id);\r\n                        const count = getCount(id);\r\n\r\n                        return (\r\n                            <li key={id}\r\n                                className={\"mb-4\"}\r\n                                >\r\n                                <div className={styles[\"order-elements-item\"]}>\r\n                                    <div className={styles[\"image\"]}>\r\n                                        <img src={`${ingredient?.image}`} alt={`${ingredient?.image}`} />\r\n                                    </div>\r\n                                    <div className={styles[\"name\"] + \" ml-4 mr-4 text text_type_main-medium\"}>\r\n                                        {ingredient?.name}\r\n                                    </div>\r\n                                    <div className={styles[\"total\"] + \" text text_type_digits-medium\"}>\r\n                                        <span className={\"mr-2\"}>{count} x {ingredient?.price}</span>\r\n                                        <CurrencyIcon type=\"primary\" onClick={undefined} />\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        )\r\n\r\n                    })}\r\n\r\n                </ul>\r\n\r\n                <div className={styles[\"bottom-block\"] + \" mt-10\"}>\r\n                    <div className={styles[\"time\"] + \" text text_type_main-medium text_color_inactive\"}>\r\n                        {getDateTime(new Date(order.createdAt))}\r\n                    </div>\r\n                    <div className={styles[\"total\"] + \" text text_type_digits-medium\"}>\r\n                        <span className={\"mr-2\"}>{total}</span>\r\n                        <CurrencyIcon type=\"primary\" onClick={undefined} />\r\n                    </div>\r\n                </div>\r\n\r\n            </section>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default OrderInfo;","import OrderInfo from \"../OrderInfo/OrderInfo\";\r\n\r\nexport function OrderInfoPage() {\r\n\r\n    const mainWrapperStyle = {\r\n        display: 'flex',\r\n        gap: 'calc(var(--offset-base-size) * 10)',\r\n        justifyContent: 'space-evenly',\r\n\r\n        width: 'calc(var(--offset-base-size) * 320)',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n\r\n        paddingTop: '122px'\r\n    };\r\n\r\n    return (\r\n        <section className=\"main\">\r\n            <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n                <OrderInfo />\r\n\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n","import { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport OrderInfo from \"../OrderInfo/OrderInfo\";\r\nimport { OrderInfoPage } from \"./OrderInfoPage\";\r\n\r\nfunction ModalSwitchForOrderInfo(props: { route: string, children: React.ReactNode }) {\r\n\r\n    const history = useHistory();\r\n    const location = useLocation<any>();\r\n\r\n    const background = (location.state && (history.action === 'PUSH' || history.action === 'REPLACE') && location.state.from) || null;\r\n\r\n    const onModalClose = () => {\r\n        history.replace({ pathname: `${props.route}`, state: { from: history.location } });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Switch location={background || location}>\r\n                <Route exact={true} path={`${props.route}`} >\r\n                    {props.children}\r\n                </Route>\r\n                <Route exact={true} path={`${props.route}/:number`} >\r\n                    <OrderInfoPage />\r\n                </Route>\r\n            </Switch>\r\n\r\n            {background &&\r\n                <Route path={`${props.route}/:number`}>\r\n                    <Modal\r\n                        // title={`#${location?.state?.number}`}\r\n                        title={``}\r\n                        onCloseModalCallback={onModalClose}\r\n                    >\r\n                        <OrderInfo />\r\n                    </Modal>\r\n                </Route>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ModalSwitchForOrderInfo;","import { useHistory } from 'react-router-dom';\r\nimport { useEffect } from \"react\";\r\nimport styles from './Feed.module.css';\r\nimport stylesScrollable from '../../css/scrollable.module.css';\r\nimport ProfileOrdersListItem from '../ProfileOrdersListItem/ProfileOrdersListItem';\r\nimport { WS_FEED_CONNECTION_CLOSED, WS_FEED_CONNECTION_START } from '../../services/actions/wsActionTypes';\r\nimport Loader from '../pages/Loader';\r\nimport { actionInitData } from '../../services/actions/basic';\r\nimport { IWsOrder } from '../../services/reducers/wsReducer';\r\nimport { useAppDispatch, useAppSelector } from '../../utils/hooks';\r\n\r\nfunction Feed() {\r\n\r\n    const { data } = useAppSelector(state => state.basic);\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    const history = useHistory();\r\n\r\n    const feed = useAppSelector(state => state.feed);\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch(actionInitData());\r\n\r\n        dispatch({ type: WS_FEED_CONNECTION_START });\r\n\r\n        return () => {\r\n\r\n            dispatch({ type: WS_FEED_CONNECTION_CLOSED });\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const onClickProfileOrderItem = (item: IWsOrder) => {\r\n        history.replace({ pathname: `/feed/${item.number}`, state: { from: history.location, number: item.number } });\r\n    }\r\n\r\n    if (!!!feed) {\r\n        return (<Loader />)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <section className={`${styles.feed}`}>\r\n\r\n                <div className={styles[\"main-title\"] + \" text_type_main-medium\"}>\r\n                    Лента заказов\r\n                </div>\r\n\r\n                <div className={styles[\"block-aside\"]}>\r\n                    <div className={`${styles['left-aside']}`}>\r\n\r\n                        {feed.orders.length > 0\r\n                            ?\r\n                            <ul className={`profile-order-list ${stylesScrollable.scrollable} pr-2`} style={{ maxHeight: \"60vh\" }}>\r\n\r\n                                {feed.orders.map((item: IWsOrder) => {\r\n\r\n                                    return (\r\n                                        <li\r\n                                            key={item._id}\r\n                                            className={\"\"}\r\n                                            onClick={() => onClickProfileOrderItem(item)}\r\n                                            style={{ cursor: \"pointer\" }}\r\n                                        >\r\n                                            <ProfileOrdersListItem item={item} data={data} isShowStatus={false} />\r\n\r\n                                        </li>\r\n                                    )\r\n                                })}\r\n\r\n                            </ul>\r\n                            :\r\n                            <Loader />\r\n                        }\r\n\r\n\r\n\r\n                    </div>\r\n\r\n                    <div className={`${styles['right-aside']}`}>\r\n\r\n                        <div className={styles[\"feed-info\"]}>\r\n\r\n                            <div className={styles[\"block-status\"]}>\r\n                                <div className={styles[\"block-ready\"]}>\r\n                                    <div className={styles.title + \" text_type_main-medium mb-6\"}>\r\n                                        Готовы:\r\n                                    </div>\r\n                                    <ul className={`${stylesScrollable.scrollable}`} style={{ maxHeight: '172px' }}>\r\n                                        {Array.from(feed.orders.filter((v: IWsOrder) => v.status === 'done')).map((item: IWsOrder) => {\r\n\r\n                                            return (\r\n                                                <li key={`${item.number}`}\r\n                                                    className=\"text_type_digits-default\"\r\n                                                >\r\n                                                    {item.number}\r\n                                                </li>\r\n                                            );\r\n                                        })}\r\n                                    </ul>\r\n                                </div>\r\n                                <div className={styles[\"block-in-work\"]}>\r\n                                    <div className={styles.title + \" text_type_main-medium mb-6\"}>\r\n                                        В работе:\r\n                                    </div>\r\n                                    <ul className={`${stylesScrollable.scrollable}`} style={{ maxHeight: '172px' }}>\r\n                                        {Array.from(feed.orders.filter((v: IWsOrder) => v.status !== 'done')).map((item: IWsOrder) => {\r\n\r\n                                            return (\r\n                                                <li key={`${item.number}`}\r\n                                                    className=\"text_type_digits-default\"\r\n                                                >\r\n                                                    {item.number}\r\n                                                </li>\r\n                                            );\r\n                                        })}\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                            <div className={styles.title + \" text text_type_main-medium mt-15\"}>\r\n                                Выполнено за все время\r\n                            </div>\r\n                            <div className={styles[\"complete-total\"] + \" text text_type_digits-large\"}>\r\n                                {feed.total}\r\n                            </div>\r\n                            <div className={styles.title + \" text text_type_main-medium mt-15\"}>\r\n                                Выполнено за сегодня\r\n                            </div>\r\n                            <div className={styles[\"complete-today\"] + \" text text_type_digits-large\"}>\r\n                                {feed.totalToday}\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n            </section>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Feed;","import Feed from \"../Feed/Feed\";\r\n\r\nexport function FeedPage() {\r\n\r\n    const mainWrapperStyle = {\r\n        display: 'flex',\r\n        gap: 'calc(var(--offset-base-size) * 10)',\r\n        justifyContent: 'space-evenly',\r\n\r\n        width: 'calc(var(--offset-base-size) * 320)',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto'\r\n    };\r\n\r\n    return (\r\n        <section className=\"main\">\r\n            <div className=\"wrapper\" style={mainWrapperStyle}>\r\n\r\n                <Feed />\r\n\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n","import { useEffect } from \"react\";\r\nimport { Route, Switch, useHistory, useLocation, useParams } from \"react-router-dom\";\r\nimport { actionInitData, DELETE_ID_FOR_POPUP, SET_ID_FOR_POPUP } from \"../../services/actions/basic\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\nimport IDataItem from \"../../utils/Interfaces/IDataItem\";\r\nimport IngredientDetails from \"../IngredientDetails/IngredientDetails\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport { HomePage } from \"./Home\";\r\nimport { IngredientPage } from \"./IngredientPage\";\r\n\r\nfunction ModalSwitch() {\r\n\r\n    const { id } = useParams<{ id: string }>();\r\n\r\n    const history = useHistory<any>();\r\n    const location = useLocation<any>();\r\n\r\n    const background = (location.state && (history.action === 'PUSH' || history.action === 'REPLACE') && location.state.from) || null;\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch(actionInitData());\r\n    \r\n      }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch({\r\n            type: SET_ID_FOR_POPUP,\r\n            idForPopup: id\r\n        });\r\n\r\n        return () => {\r\n            dispatch({\r\n                type: DELETE_ID_FOR_POPUP,\r\n            });\r\n        };\r\n\r\n    }, [dispatch, id]);\r\n\r\n    const { data, idForPopup } = useAppSelector(state => state.basic);\r\n\r\n    const clearIdForPopup = () => {\r\n        dispatch({\r\n            type: DELETE_ID_FOR_POPUP,\r\n        });\r\n\r\n        history.replace({ pathname: `/`, state: { from: history.location } });\r\n    }\r\n\r\n    const getIngredientById = (id: string) => {\r\n        return data.find((v: any) => { return v._id === id });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Switch location={background || location}>\r\n                <Route exact={true} path=\"/\" >\r\n                    <HomePage />\r\n                </Route>\r\n                <Route exact={true} path=\"/ingredients/:id\" >\r\n                    <IngredientPage />\r\n                </Route>\r\n            </Switch>\r\n\r\n            {background &&\r\n                <Route path=\"/ingredients/:id\">\r\n\r\n                    {idForPopup &&\r\n                        <Modal title={'Детали ингредиента'} onCloseModalCallback={(clearIdForPopup)}>\r\n                            <IngredientDetails style={undefined} element={getIngredientById(idForPopup) as IDataItem}></IngredientDetails>\r\n                        </Modal>\r\n                    }\r\n\r\n                </Route>\r\n            }\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default ModalSwitch;","export default __webpack_public_path__ + \"static/media/page404v2.ce4353e7.gif\";","import { Link } from \"react-router-dom\";\r\nimport page404 from './../../images/page404v2.gif';\r\n\r\nfunction Page404() {\r\n    return (\r\n        <>\r\n            <style>{\"\\\r\n        body{\\\r\n          overflow:hidden;\\\r\n        }\\\r\n      \"}</style>\r\n\r\n            <Link to=\"/\">\r\n                <div style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    height: '100vh',\r\n                    // backgroundColor: 'black',\r\n                    // alignItems: 'center'\r\n                }}>\r\n                    <img\r\n                        title=\"Вернуться на главную\"\r\n                        style={{\r\n                            maxWidth: '100%',\r\n                            maxHeight: '60vh',\r\n                            objectFit: 'cover',\r\n                            // backgroundColor: 'black',\r\n                            overflow: 'hidden'\r\n                        }}\r\n                        alt={'loading...'}\r\n                        src={page404} />\r\n                </div>\r\n            </Link>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Page404;","import { useHistory, useLocation } from 'react-router-dom';\r\nimport {\r\n    Logo,\r\n    BurgerIcon,\r\n    ProfileIcon,\r\n    ListIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './AppHeader.module.css';\r\n\r\nconst styleForHeaderWrapper = {\r\n    width: 'calc(var(--offset-base-size) * 320)',\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto'\r\n}\r\n\r\nfunction AppHeader() {\r\n\r\n    const history = useHistory();\r\n    const { state, pathname } = useLocation();\r\n    \r\n    const onConstructorClickHandler = () => {\r\n        history.replace({ pathname: '/', state });\r\n    }\r\n    \r\n    const onFeedClickHandler = () => {\r\n        history.replace({ pathname: '/feed', state });\r\n    }\r\n    \r\n    const onProfileClickHandler = () => {\r\n        history.replace({ pathname: '/profile', state });\r\n    }\r\n\r\n    return (\r\n        <header className={styles[\"app-header\"] + \" pt-4 pb-4\"}>\r\n\r\n            <div className={styles[\"wrapper\"]} style={styleForHeaderWrapper}>\r\n\r\n                <ul className={styles[\"navigation-bar\"]}>\r\n                    <li className={styles[\"navigation-link\"] + \" p-5\"} onClick={onConstructorClickHandler}>\r\n                        <BurgerIcon type={`${pathname === '/' ? 'primary' : 'secondary'}`} />\r\n                        <span className={styles[\"navigation-text\"] + ` text text_type_main-default ${pathname !== '/' ? 'text_color_inactive' : null} ml-2`} >Конструктор</span>\r\n                    </li>\r\n                    <li className={styles[\"navigation-link\"] + \" p-5\"} onClick={onFeedClickHandler}>\r\n                        <ListIcon type={`${pathname === '/feed' ? 'primary' : 'secondary'}`} />\r\n                        <span className={styles[\"navigation-text\"] + ` text text_type_main-default ${pathname !== '/feed' ? 'text_color_inactive' : null}  ml-2`} >Лента заказов</span>\r\n                    </li>\r\n                </ul>\r\n\r\n                <div className={styles[\"logo-wrapper\"]} onClick={onConstructorClickHandler}>\r\n                    <Logo />\r\n                </div>\r\n\r\n                <ul className={styles[\"navigation-bar\"]}>\r\n                    <li className={styles[\"navigation-link\"] + \" p-5\"} onClick={onProfileClickHandler}>\r\n                        <ProfileIcon type={`${pathname === '/profile' ? 'primary' : 'secondary'}`} />\r\n                        <span className={styles[\"navigation-text\"] + ` text text_type_main-default ${pathname !== '/profile' ? 'text_color_inactive' : null} ml-2`} >Личный кабинет</span>\r\n                    </li>\r\n                </ul>\r\n\r\n            </div>\r\n\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default AppHeader;","import { useAuth } from '../services/auth';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport React, { useEffect, useState } from 'react';\r\nimport Loader from './pages/Loader';\r\n\r\nexport function ProtectedRoute({ children, ...rest }: React.PropsWithChildren<{ [key: string]: any }>) {\r\n\r\n  let { user, ...auth } = useAuth();\r\n  const [isUserLoaded, setUserLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n\r\n    setUserLoaded(!!user);\r\n\r\n  }, [user]);\r\n\r\n  const isHas = auth.isHasCookie();\r\n\r\n  if (isHas && !isUserLoaded) {\r\n\r\n    return (\r\n      <Loader />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isUserLoaded ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/login',\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport {\r\n  HomePage,\r\n  LoginPage,\r\n  RegistrationPage,\r\n  ProfilePage,\r\n  ForgotPasswordPage,\r\n  ResetPasswordPage,\r\n  ModalSwitch,\r\n  FeedPage,\r\n  ModalSwitchForOrderInfo,\r\n  Page404\r\n} from './../pages';\r\nimport { ProvideAuth } from '../../services/auth';\r\nimport AppHeader from '../AppHeader/AppHeader';\r\nimport { ProtectedRoute } from '../ProtectedRoute';\r\n// import HomeOrIngredientPage from '../pages/HomeOrIngredientPage';\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <ProvideAuth>\r\n\r\n      <Router basename=\"/\">\r\n\r\n        <AppHeader />\r\n\r\n        <Switch>\r\n\r\n          <Route path=\"/login\" exact={true}>\r\n            <LoginPage />\r\n          </Route>\r\n\r\n          <Route path=\"/register\" exact={true}>\r\n            <RegistrationPage />\r\n          </Route>\r\n\r\n          <Route path=\"/forgot-password\" exact={true}>\r\n            <ForgotPasswordPage />\r\n          </Route>\r\n\r\n          <Route path=\"/reset-password\" exact={true}>\r\n            <ResetPasswordPage />\r\n          </Route>\r\n\r\n          <ProtectedRoute path=\"/profile\" exact={true}>\r\n            <ProfilePage />\r\n          </ProtectedRoute>\r\n\r\n          <Route path=\"/ingredients/:id\" exact={true}>\r\n            {/* <HomeOrIngredientPage /> */}\r\n            <ModalSwitch />\r\n          </Route>\r\n\r\n\r\n          <Route path=\"/feed\" exact={true}>\r\n            <FeedPage />\r\n          </Route>\r\n\r\n          <Route path=\"/feed/:number\" exact={true}>\r\n            {/* TODO page and modal */}\r\n            {/* <OrderInfoPage /> */}\r\n            <ModalSwitchForOrderInfo route={\"/feed\"}>\r\n              <FeedPage />\r\n            </ModalSwitchForOrderInfo>\r\n          </Route>\r\n\r\n          <ProtectedRoute path=\"/profile/orders\" exact={true}>\r\n            <ProfilePage />\r\n          </ProtectedRoute>\r\n\r\n          <ProtectedRoute path=\"/profile/orders/:number\" exact={true}>\r\n            {/* TODO page and modal */}\r\n            {/* <OrderInfoPage /> */}\r\n            <ModalSwitchForOrderInfo route={\"/profile/orders\"}>\r\n              <ProfilePage />\r\n            </ModalSwitchForOrderInfo>\r\n          </ProtectedRoute>\r\n\r\n          <Route path=\"/\" exact={true}>\r\n            <HomePage />\r\n          </Route>\r\n\r\n          <Route>\r\n\r\n            {/* <h1>Oops! 404 Error</h1>\r\n            <p>The page you requested does not exist</p>\r\n            <br />\r\n            <p>check the address or try <Link to='/' >homepage</Link></p> */}\r\n\r\n            <Page404 />\r\n\r\n          </Route>\r\n\r\n        </Switch>\r\n      </Router>\r\n\r\n    </ProvideAuth>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { SET_USER_REQUEST, TAythDispatchType } from \"../actions/auth\";\r\n\r\nexport interface IInitialStateAuth {\r\n    user: {\r\n        email: string\r\n    } | null,\r\n    id: string | null\r\n}\r\n\r\nconst initialStateAuth: IInitialStateAuth = {\r\n    user: null,\r\n    id: null\r\n}\r\n\r\nexport const authReduser = (state: IInitialStateAuth = initialStateAuth, action: TAythDispatchType) : IInitialStateAuth => {\r\n    switch (action.type) {\r\n        case SET_USER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                user: action.user,\r\n                id: action.user?.email || null\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}","import IBasicState from '../../utils/Interfaces/IBasicState';\r\nimport IDataItem from '../../utils/Interfaces/IDataItem';\r\n\r\nimport {\r\n    SET_DATA_REQUEST,\r\n    SET_SELECTED_INGREDIENTS,\r\n    SET_ORDER_DATA,\r\n    SET_ID_FOR_POPUP,\r\n    DELETE_ID_FOR_POPUP,\r\n    SET_ORDER_STATUS,\r\n    TBasicDispatchType\r\n} from '../actions/basic';\r\n\r\nconst initialState: IBasicState = {\r\n    data: Array.from<IDataItem>([]),\r\n    selectedIngredientsId: Array.from<string>([]),\r\n    idForPopup: null,\r\n    orderInfo: null,\r\n    orderStatus: null\r\n};\r\n\r\nexport const basicReducer = (state: IBasicState = initialState, action: TBasicDispatchType): IBasicState => {\r\n    switch (action.type) {\r\n        case SET_DATA_REQUEST: {\r\n            return {\r\n                ...state,\r\n                data: Array.from<IDataItem>(action.data)\r\n            };\r\n        }\r\n        case SET_SELECTED_INGREDIENTS: {\r\n            return {\r\n                ...state,\r\n                selectedIngredientsId: action.selectedIngredientsId\r\n            };\r\n        }\r\n        case SET_ORDER_DATA: {\r\n            return {\r\n                ...state,\r\n                orderInfo: action.orderData\r\n            };\r\n        }\r\n        case SET_ID_FOR_POPUP: {\r\n            return {\r\n                ...state,\r\n                idForPopup: action.idForPopup\r\n            };\r\n        }\r\n        case DELETE_ID_FOR_POPUP: {\r\n            return {\r\n                ...state,\r\n                idForPopup: null\r\n            };\r\n        }\r\n        case SET_ORDER_STATUS: {\r\n            return {\r\n                ...state,\r\n                orderStatus: action.status\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};","import {\r\n  WS_FEED_CONNECTION_SUCCESS,\r\n  WS_FEED_CONNECTION_ERROR,\r\n  WS_FEED_CONNECTION_CLOSED,\r\n  WS_FEED_GET_MESSAGE,\r\n  TWsFeedConnectionDispatchType\r\n} from '../actions/wsActionTypes';\r\nimport { IInitialState, IWsOrder } from './wsReducer';\r\n\r\nconst initialState: IInitialState = {\r\n  wsConnected: false,\r\n  orders: Array.from<IWsOrder>([]),\r\n  total: null,\r\n  totalToday: null\r\n};\r\n\r\nexport const wsFeedReducer = (state: IInitialState = initialState, action: TWsFeedConnectionDispatchType): IInitialState => {\r\n  switch (action.type) {\r\n    case WS_FEED_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsConnected: true\r\n      };\r\n\r\n    case WS_FEED_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        wsConnected: false\r\n      };\r\n\r\n    case WS_FEED_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        wsConnected: false\r\n      };\r\n\r\n    case WS_FEED_GET_MESSAGE:\r\n\r\n      return {\r\n        ...state,\r\n        total: action.payload.total,\r\n        totalToday: action.payload.totalToday,\r\n        orders: action.payload.orders\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_MESSAGE,\r\n  TWsConnectionDispatchType\r\n} from '../actions/wsActionTypes';\r\n\r\nexport interface IWsOrder {\r\n  ingredients: string[],\r\n  _id: string,\r\n  status: 'created' | 'pending' | 'done'\r\n  number: number,\r\n  createdAt: string,\r\n  updatedAt: string,\r\n  name?: string\r\n}\r\n\r\nexport interface IInitialState {\r\n  wsConnected: boolean,\r\n  orders: IWsOrder[],\r\n  total: number | null,\r\n  totalToday: number | null\r\n}\r\n\r\nconst initialState: IInitialState = {\r\n  wsConnected: false,\r\n  orders: Array.from<IWsOrder>([]),\r\n  total: null,\r\n  totalToday: null\r\n};\r\n\r\nexport const wsReducer = (state: IInitialState = initialState, action: TWsConnectionDispatchType) : IInitialState => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsConnected: true\r\n      };\r\n\r\n    case WS_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        wsConnected: false\r\n      };\r\n\r\n    case WS_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        wsConnected: false\r\n      };\r\n\r\n    case WS_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        total: action.payload.total,\r\n        totalToday: action.payload.totalToday,\r\n        orders: action.payload.orders\r\n      };\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\n\r\nimport { authReduser } from './authReduser';\r\nimport { basicReducer } from './basicReducer';\r\nimport { wsFeedReducer } from './wsFeedReducer';\r\nimport { wsReducer } from './wsReducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n    basic: basicReducer,\r\n    auth: authReduser,\r\n    profileOrders: wsReducer,\r\n    feed: wsFeedReducer\r\n});\r\n","import { AppDispatch, AppThunk } from '../../utils/types';\r\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_START, WS_CONNECTION_SUCCESS, WS_GET_MESSAGE, WS_SEND_MESSAGE } from '../actions/wsActionTypes';\r\nimport { WS_FEED_CONNECTION_CLOSED, WS_FEED_CONNECTION_ERROR, WS_FEED_CONNECTION_START, WS_FEED_CONNECTION_SUCCESS, WS_FEED_GET_MESSAGE, WS_FEED_SEND_MESSAGE } from '../actions/wsActionTypes';\r\n\r\nimport { getCookie } from \"../utils\";\r\n\r\nexport const wsFeedActions = {\r\n  wsInit: WS_FEED_CONNECTION_START,\r\n  wsSendMessage: WS_FEED_SEND_MESSAGE,\r\n  onOpen: WS_FEED_CONNECTION_SUCCESS,\r\n  onClose: WS_FEED_CONNECTION_CLOSED,\r\n  onError: WS_FEED_CONNECTION_ERROR,\r\n  onMessage: WS_FEED_GET_MESSAGE\r\n};\r\n\r\nexport const wsActions = {\r\n  wsInit: WS_CONNECTION_START,\r\n  wsSendMessage: WS_SEND_MESSAGE,\r\n  onOpen: WS_CONNECTION_SUCCESS,\r\n  onClose: WS_CONNECTION_CLOSED,\r\n  onError: WS_CONNECTION_ERROR,\r\n  onMessage: WS_GET_MESSAGE\r\n};\r\n\r\nexport const socketMiddlewareList = () => {\r\n\r\n  const feedUrl = 'wss://norma.nomoreparties.space/orders/all';\r\n  const profileOrdersUrl = 'wss://norma.nomoreparties.space/orders';\r\n\r\n  return [socketMiddleware(feedUrl, wsFeedActions, false), socketMiddleware(profileOrdersUrl, wsActions, true)];\r\n}\r\n\r\nexport type TWsActions = typeof wsFeedActions | typeof wsActions;\r\n\r\n// START TODO if not for prodaction\r\nexport const tryWithNotWs = (store: any, onMessage: typeof wsFeedActions.onMessage | typeof wsActions.onMessage) => {\r\n  fetch('https://norma.nomoreparties.space/api/orders/all', {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + getCookie('token')\r\n    },\r\n  })\r\n    .then(result => {\r\n      if (result.ok) {\r\n        return result.json();\r\n      }\r\n      return Promise.reject(`Ошибка ${result.status}`);\r\n    })\r\n    .then(\r\n      (result) => {\r\n        if (result.success) {\r\n          const { dispatch } = store;\r\n          dispatch({ type: onMessage, payload: result });\r\n        }\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n}\r\n// END\r\n\r\nexport const socketMiddleware = (wsUrl: string, wsActions: TWsActions, isNeedToken: boolean): any => {\r\n  return ((store: { dispatch: AppDispatch | AppThunk }) => {\r\n    let socket: any = null;\r\n\r\n    return ((next: any) => (action: any) => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n      const { wsInit, wsSendMessage, onOpen, onClose, onError, onMessage } = wsActions;\r\n\r\n      const token = getCookie('token');\r\n\r\n      if (isNeedToken) {\r\n        if (type === wsInit && token) {\r\n          socket = new WebSocket(`${wsUrl}?token=${token}`);\r\n        }\r\n      } else {\r\n        if (type === wsInit) {\r\n          socket = new WebSocket(`${wsUrl}`);\r\n        }\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = (event: WebSocketEventMap) => {\r\n          dispatch({ type: onOpen, payload: event });\r\n        };\r\n\r\n        socket.onerror = (event: WebSocketEventMap) => {\r\n\r\n          //TODO if not for prodaction\r\n          //tryWithNotWs(store, onMessage);\r\n\r\n          dispatch({ type: onError, payload: event });\r\n        };\r\n\r\n        socket.onmessage = (event: WebSocketEventMap & { data: string }) => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          const { success, ...restParsedData } = parsedData;\r\n\r\n          dispatch({ type: onMessage, payload: restParsedData });\r\n        };\r\n\r\n        socket.onclose = (event: WebSocketEventMap) => {\r\n          dispatch({ type: onClose, payload: event });\r\n        };\r\n\r\n        if (type === wsSendMessage) {\r\n          const message = { ...payload, token: token };\r\n          socket.send(JSON.stringify(message));\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    });\r\n  });\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../src/css/index.css';\r\nimport App from './components/App/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport thunk from 'redux-thunk';\r\nimport { compose, createStore, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport { rootReducer } from './services/reducers/rootReducer';\r\nimport { socketMiddlewareList } from './services/middleware';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__<any>({})\r\n    :\r\n    compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, ...socketMiddlewareList()));\r\n\r\nconst store = createStore(rootReducer, enhancer);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollable\":\"scrollable_scrollable__1gWpr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger-ingredients\":\"BurgerIngredients_burger-ingredients__1h0mI\",\"tab-bar\":\"BurgerIngredients_tab-bar__3k5WR\",\"tab-elements\":\"BurgerIngredients_tab-elements__2wyZB\",\"ingredients-list\":\"BurgerIngredients_ingredients-list__34aTE\",\"list-item\":\"BurgerIngredients_list-item__3kXX2\",\"counter-wrapper\":\"BurgerIngredients_counter-wrapper__2yOQI\",\"counter-wrapper-left\":\"BurgerIngredients_counter-wrapper-left__2mKUi\",\"illustration\":\"BurgerIngredients_illustration__3lBLO\",\"price-block\":\"BurgerIngredients_price-block__2tXN0\",\"price\":\"BurgerIngredients_price__1P54H\",\"item-name\":\"BurgerIngredients_item-name__1xCT1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile-order-item\":\"ProfileOrdersListItem_profile-order-item__25zAX\",\"number\":\"ProfileOrdersListItem_number__2b-0w\",\"time\":\"ProfileOrdersListItem_time__2PvkD\",\"name\":\"ProfileOrdersListItem_name__18ZMA\",\"status\":\"ProfileOrdersListItem_status__U_wGi\",\"panel-bottom\":\"ProfileOrdersListItem_panel-bottom__30_Re\",\"image-list\":\"ProfileOrdersListItem_image-list__t1O82\",\"image-item\":\"ProfileOrdersListItem_image-item__2AP4t\",\"offset-count\":\"ProfileOrdersListItem_offset-count__1YsqO\",\"total\":\"ProfileOrdersListItem_total__1-3vk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app-header\":\"AppHeader_app-header__dUb6i\",\"wrapper\":\"AppHeader_wrapper__1q47x\",\"logo-wrapper\":\"AppHeader_logo-wrapper__vhf3S\",\"navigation-bar\":\"AppHeader_navigation-bar__1ipd5\",\"navigation-link\":\"AppHeader_navigation-link__2YojT\",\"navigation-text\":\"AppHeader_navigation-text__3cjTU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger-constructor\":\"BurgerConstructor_burger-constructor__3rKtC\",\"top\":\"BurgerConstructor_top__hj2qs\",\"bottom\":\"BurgerConstructor_bottom__1NNuQ\",\"checkout-block\":\"BurgerConstructor_checkout-block__3f2fs\",\"total\":\"BurgerConstructor_total__bL-Pa\",\"currency-icon-wrapper\":\"BurgerConstructor_currency-icon-wrapper__2IQb3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"Profile_profile__qtqwX\",\"left-aside\":\"Profile_left-aside__17b3v\",\"link\":\"Profile_link__iUk2v\",\"right-aside\":\"Profile_right-aside__1lSCn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkout-info\":\"OrderDetails_checkout-info__1mI_9\",\"checkout-number\":\"OrderDetails_checkout-number__1gR5y\",\"checkout-title\":\"OrderDetails_checkout-title__15Klg\",\"checkout-icon-wrapper\":\"OrderDetails_checkout-icon-wrapper__3gAlt\",\"checkout-status\":\"OrderDetails_checkout-status__2lL88\",\"checkout-text\":\"OrderDetails_checkout-text__3IS3s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__1aP6l\",\"title\":\"Login_title__1D5uC\",\"form\":\"Login_form__11Q6C\",\"title-bottom\":\"Login_title-bottom__1--Iw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal-body\":\"Modal_modal-body__lQTj_\",\"modal-header\":\"Modal_modal-header__2Oi5e\",\"close-icon-wrapper\":\"Modal_close-icon-wrapper__2lzDA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"registration\":\"Registration_registration__u0kwm\",\"title\":\"Registration_title__KKa0J\",\"form\":\"Registration_form__21Pr1\",\"input__container\":\"Registration_input__container__2GJmw\",\"input_size_default\":\"Registration_input_size_default__1wG17\",\"title-bottom\":\"Registration_title-bottom__3Vpci\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"forgot-password\":\"ForgotPassword_forgot-password__1q5if\",\"title\":\"ForgotPassword_title__1vdl3\",\"form\":\"ForgotPassword_form__EKxHB\",\"input__container\":\"ForgotPassword_input__container__3fiUr\",\"input_size_default\":\"ForgotPassword_input_size_default__2iHaE\",\"title-bottom\":\"ForgotPassword_title-bottom__2qGMQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reset-password\":\"ResetPassword_reset-password__2y6Pv\",\"title\":\"ResetPassword_title__3heJz\",\"form\":\"ResetPassword_form__3mgZX\",\"input__container\":\"ResetPassword_input__container__SnV62\",\"input_size_default\":\"ResetPassword_input_size_default__3XaBP\",\"title-bottom\":\"ResetPassword_title-bottom__1RsQx\"};"],"sourceRoot":""}